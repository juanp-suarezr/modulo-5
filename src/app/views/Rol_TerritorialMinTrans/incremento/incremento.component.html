<div class="sm:grid sm:grid-cols-10 gap-4 pb-24" xmlns="http://www.w3.org/1999/html">

  <div class="md:col-span-2 sm:col-span-3 w-auto sm:mt-16 mt-12 mb-12">
    <app-left-nav [data]="infoMenu" active="{{activeNum}}"></app-left-nav>
  </div>
  <!-- solicitud contenido -->
  <div class="md:col-span-8 sm:col-span-7 w-auto sm:mt-10 mt-4 md:px-8 px-2" *ngIf="activeNum == '0'">

    <h3 class="text-primary1 !font-bold mt-4"> Incremento de Capacidad Transportadora</h3>

    <!-- sttepper -->
    <div class="mt-4 w-full justify-center">
      <app-sttepper [dataStep]="infoStepper" [contentTemplates]="stepContents"></app-sttepper>
    </div>

    <!-- formulario 1 -->
    <ng-template #content1>
      <form [formGroup]="formGroup1" class="px-4 md:pl-16 md:pe-16 mt-6 active1 mb-6" *ngIf="activeStep == 1">

        <div class="col-span-2">
          <p class="font-bold">Cargue de documentación</p>
          <p class="text-primary4 font-[500]">Los campos marcados con * son obligatorios</p>
        </div>

        <!-- contenido 1 -->
        <div class="content1 lg:grid lg:grid-cols-2 md:gap-x-24 lg:gap-x-36 md:flex md:flex-wrap items-center h-full">

          <!-- input 3 -->
          <div class="w-full flex flex-col justify-center pt-6">

            <p class="text-primary3 font-semibold">
              NIT de empresa que realiza la solicitud*
            </p>

            <!-- input -->
            <div class="mt-2 relative w-full">
              <input
                class="shadow-sm rounded-md min-w-[160px] w-full p-[10px] h-[40px] border border-primary3 focus:outline-none focus:border-primary1 bg-transparent"
                type="text" formControlName="nit" required placeholder="Ingrese NIT">
              <div class="w-full relative">
                <!-- Icono de error (rojo) -->
                <span *ngIf="formGroup1.get('nit')?.invalid && (formGroup1.get('nit')?.touched || submitted)"
                      class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                  <span class="pi pi-exclamation-circle text-error text-[24px]"></span>
                </span>

                <!-- Icono de éxito (verde) -->
                <span *ngIf="formGroup1.get('nit')?.valid && (formGroup1.get('nit')?.touched || submitted)"
                      class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                  <span class="pi pi-check-circle text-success text-[24px]"></span>
                </span>
              </div>
              <span *ngIf="submitted && formGroup1.get('nit')?.errors?.['required']" class="text-error">
                NIT de empresa es obligatorio
              </span>
            </div>

          </div>

          <!-- input 1 -->
          <div class="w-full flex flex-col justify-center pt-6">

            <p class="text-primary3 font-semibold">
              Nombre de empresa que realiza la solicitud*
            </p>

            <!-- input -->
            <div class="mt-2 relative w-full">
              <input
                class="shadow-sm rounded-md min-w-[160px] w-full p-[10px] h-[40px] border border-primary3 focus:outline-none focus:border-primary1 bg-transparent disabled:bg-secondary3 disabled:border-secondary2 disabled:text-secondary2 disabled:font-bold"
                type="text" formControlName="nombreEmpresa" required placeholder="Nombre empresa">
              <div class="w-full relative">
                <!-- Icono de error (rojo) -->
                <span
                  *ngIf="formGroup1.get('nombreEmpresa')?.invalid && (formGroup1.get('nombreEmpresa')?.touched || submitted)"
                  class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                  <span class="pi pi-exclamation-circle text-error text-[24px]"></span>
                </span>

                <!-- Icono de éxito (verde) -->
                <span
                  *ngIf="formGroup1.get('nombreEmpresa')?.valid && (formGroup1.get('nombreEmpresa')?.touched || submitted)"
                  class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                  <span class="pi pi-check-circle text-success text-[24px]"></span>
                </span>

              </div>
              <span *ngIf="submitted && formGroup1.get('nombreEmpresa')?.errors?.['required']" class="text-error">
                Nombre de empresa es obligatorio
              </span>
            </div>

          </div>

        </div>

        <!-- contenido 1 -->
        <div class="content1 lg:grid lg:grid-cols-2 md:gap-x-24 lg:gap-x-36 md:flex md:flex-wrap items-center h-full">

          <!-- cargue 1 -->
          <div class="w-full flex flex-col justify-center items-start pt-6 my-auto mb-2 h-full">

            <p class="text-primary3 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[1]}">
              Copia de los contratos de servicio especial, que esté
              ejecutando y de los nuevos que requiere atender con la
              nueva capacidad*
            </p>

            <app-file-upload class="mt-2 h-full" [dataClass]="dataClass" mimes=".pdf" [error]="errorStates[1]"
                             (fileSelected)="onFileSelected($event, 1)"></app-file-upload>

            <!-- Opcion que aparece si existe archivo guardado en la solicitud -->
            <div class="w-full"
                 *ngIf="(this.formGroup1.get('1')?.value != '' && this.formGroup1.get('1')?.value != null) && this.solicitudGuardada && this.contratosArray">
              <p class="text-center">Documentos actualmente guardados</p>
              <div class="mt-2 flex gap-2 items-center">
                <!-- Botón de Navegación Izquierda (visible solo si hay más de 2 archivos) -->
                <button *ngIf="this.contratosArray.length > 2" class="m-auto" (click)="moveLeft()"
                        [disabled]="currentIndex === 0">
                  <span class="pi pi-chevron-left text-primary2 text-xl"></span>
                </button>

                <!-- Archivos Visibles -->
                <div *ngFor="let file of visibleFiles; let index = index"
                     class="bg-white border-2 border-secondary2 p-2 flex justify-center w-auto z-1"
                     [ngClass]="{'bg-error/40': deletedValues.includes(file.id)}">

                  <!-- document -->
                  <div class="w-full m-auto cursor-pointer z-1" (click)="viewDocument(file.documento)">
                    <svg xmlns="http://www.w3.org/2000/svg" class="fill-primary2 h-6 w-6 m-auto" viewBox="0 0 384 512">
                      <path
                        d="M64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16l160 0 0 80c0 17.7 14.3 32 32 32l80 0 0 288c0 8.8-7.2 16-16 16L64 464zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-293.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0L64 0zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"/>
                    </svg>
                  </div>

                  <!-- texto info file -->
                  <div class="px-2 w-auto">
                    <p class="truncate text-[8px] font-semibold">
                      Contratos {{ (currentIndex + 1) + index }}
                    </p>
                    <p class="truncate text-[8px]">{{
                        (file.documento.size / 1024).toFixed(2)
                      }} Kb
                    </p>
                  </div>
                  <!-- button borrar -->
                  <button *ngIf="!deletedValues.includes(file.id)" class="m-auto w-auto"
                          (click)="deleteFile(1, ((currentIndex+1)+index)-1)">
                    <span class="pi pi-trash w-full h-full sm:text-xl text-base text-primary2 text-medium"></span>
                  </button>

                  <!-- button regresar -->
                  <button *ngIf="deletedValues.includes(file.id)" class="m-auto w-auto"
                          (click)="NodeleteFile(((currentIndex+1)+index)-1)">
                    <span pTooltip="restaurar documento" tooltipPosition="right"
                          class="pi pi-sync w-full h-full sm:text-xl text-base text-primary2 text-medium"></span>
                  </button>

                </div>

                <!-- Botón de Navegación Derecha (visible solo si hay más de 2 archivos) -->
                <button *ngIf="this.contratosArray.length > 2" class="m-auto" (click)="moveRight()"
                        [disabled]="currentIndex >= this.contratosArray.length - maxVisibleFiles">
                  <span class="pi pi-chevron-right text-primary2 text-xl"></span>
                </button>

              </div>

            </div>

          </div>

          <!-- cargue 2 -->
          <div class="w-full flex flex-col justify-center items-start pt-6 my-auto mb-2 h-full">

            <p class="text-primary3 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[2]}">
              Plan de rodamiento, donde demuestre la utilización
              de vehículos autorizados y de los que solicitan con el
              aumento, aclarando cuales son los vehículos nuevos*
            </p>

            <app-file-upload class="mt-2 h-full" [dataClass]="dataClass" [maxFiles]="1" mimes=".pdf"
                             [error]="errorStates[2]" (fileSelected)="onFileSelected($event, 2)"></app-file-upload>

            <div class="w-full"
                 *ngIf="(this.formGroup1.get('2')?.value != '' && this.formGroup1.get('2')?.value != null) && this.solicitudGuardada && !isActuFile.includes(2)">

              <div class="mt-2 flex gap-2 items-center cursor-pointer"
                   (click)="viewDocument(formGroup1.get('2')?.value)">

                <!-- Archivos Visibles -->
                <div class="bg-white border-2 border-secondary2 p-2 flex justify-center w-auto">

                  <!-- document -->
                  <div class="w-auto m-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" class="fill-primary2 h-6 w-6 m-auto" viewBox="0 0 384 512">
                      <path
                        d="M64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16l160 0 0 80c0 17.7 14.3 32 32 32l80 0 0 288c0 8.8-7.2 16-16 16L64 464zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-293.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0L64 0zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"/>
                    </svg>
                  </div>

                  <!-- texto info file -->
                  <div class="px-2 w-auto">
                    <p class="truncate text-[8px] font-semibold">
                      Plan rodamiento
                    </p>
                    <p class="truncate text-[8px]">{{
                        (this.formGroup1.get('2')?.value.size /
                          1024).toFixed(2)
                      }} Kb</p>
                  </div>

                  <!-- button borrar -->
                  <button class="m-auto w-auto" (click)="deleteFile(1)">
                    <span class="pi pi-trash w-full h-full sm:text-xl text-base text-primary2 text-medium"></span>
                  </button>

                </div>

              </div>

            </div>

          </div>

        </div>

        <!-- contenido 2 -->
        <div
          class="content2 lg:grid lg:grid-cols-2 md:gap-x-24 lg:gap-x-36 md:flex md:flex-wrap items-center h-full pt-6">

          <!-- cargue 3 -->
          <div class="w-full flex flex-col justify-center items-start pt-6 my-auto mb-2 h-full">

            <p class="text-primary3 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[3]}">
              Estructura de costos de las operaciones que tienen
              contratadas y las tarifas establecidas por el servicio*
            </p>

            <app-file-upload class="mt-2 h-full" [dataClass]="dataClass" [maxFiles]="1" mimes=".pdf"
                             [error]="errorStates[3]" (fileSelected)="onFileSelected($event, 3)"></app-file-upload>

            <div class="w-full"
                 *ngIf="(this.formGroup1.get('3')?.value != '' && this.formGroup1.get('3')?.value != null) && this.solicitudGuardada && !isActuFile.includes(3)">

              <div class="mt-2 flex gap-2 items-center cursor-pointer"
                   (click)="viewDocument(formGroup1.get('3')?.value)">

                <!-- Archivos Visibles -->
                <div class="bg-white border-2 border-secondary2 p-2 flex justify-center w-auto">

                  <!-- document -->
                  <div class="w-auto m-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" class="fill-primary2 h-6 w-6 m-auto" viewBox="0 0 384 512">
                      <path
                        d="M64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16l160 0 0 80c0 17.7 14.3 32 32 32l80 0 0 288c0 8.8-7.2 16-16 16L64 464zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-293.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0L64 0zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"/>
                    </svg>
                  </div>

                  <!-- texto info file -->
                  <div class="px-2 w-auto">
                    <p class="truncate text-[8px] font-semibold">
                      Estructura de costos
                    </p>
                    <p class="truncate text-[8px]">{{
                        (this.formGroup1.get('3')?.value.size /
                          1024).toFixed(2)
                      }} Kb</p>
                  </div>

                  <!-- button borrar -->
                  <button class="m-auto w-auto" (click)="deleteFile(1)">
                    <span class="pi pi-trash w-full h-full sm:text-xl text-base text-primary2 text-medium"></span>
                  </button>

                </div>

              </div>

            </div>

          </div>

          <!-- cargue 4 -->
          <div class="w-full flex flex-col justify-center items-start pt-6 my-auto mb-2 h-full">

            <p class="text-primary3 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[4]}">
              Certificado de cumplimiento del 7% o 10% de flota de la
              empresa*
            </p><br>

            <app-file-upload class="mt-2 h-full" [dataClass]="dataClass" [maxFiles]="1" mimes=".pdf"
                             [error]="errorStates[4]" (fileSelected)="onFileSelected($event, 4)"></app-file-upload>

            <div class="w-full"
                 *ngIf="(this.formGroup1.get('4')?.value != '' && this.formGroup1.get('4')?.value != null) && this.solicitudGuardada && !isActuFile.includes(4)">

              <div class="mt-2 flex gap-2 items-center cursor-pointer"
                   (click)="viewDocument(formGroup1.get('4')?.value)">

                <!-- Archivos Visibles -->
                <div class="bg-white border-2 border-secondary2 p-2 flex justify-center w-auto">

                  <!-- document -->
                  <div class="w-auto m-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" class="fill-primary2 h-6 w-6 m-auto" viewBox="0 0 384 512">
                      <path
                        d="M64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16l160 0 0 80c0 17.7 14.3 32 32 32l80 0 0 288c0 8.8-7.2 16-16 16L64 464zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-293.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0L64 0zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"/>
                    </svg>
                  </div>

                  <!-- texto info file -->
                  <div class="px-2 w-auto">
                    <p class="truncate text-[8px] font-semibold">
                      Certificado de cumplimiento
                    </p>
                    <p class="truncate text-[8px]">{{
                        (this.formGroup1.get('4')?.value.size /
                          1024).toFixed(2)
                      }} Kb</p>
                  </div>

                  <!-- button borrar -->
                  <button class="m-auto w-auto" (click)="deleteFile(1)">
                    <span class="pi pi-trash w-full h-full sm:text-xl text-base text-primary2 text-medium"></span>
                  </button>

                </div>

              </div>

            </div>

          </div>

        </div>

        <!-- contenido 3 -->
        <div
          class="content1 lg:grid lg:grid-cols-2 md:gap-x-24 lg:gap-x-36 md:flex md:flex-wrap items-center h-full pt-6">

          <!-- cargue 5 -->
          <div class="w-full flex flex-col justify-center items-start pt-6 my-auto mb-2 h-full">

            <p class="text-primary3 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[5]}">
              Certificado de Existencia y Representación legal no
              menos a 30 días*
            </p>

            <app-file-upload class="mt-2 h-full" [dataClass]="dataClass" [maxFiles]="1" mimes=".pdf"
                             [error]="errorStates[5]" (fileSelected)="onFileSelected($event, 5)"></app-file-upload>

            <div class="w-full"
                 *ngIf="(this.formGroup1.get('5')?.value != '' && this.formGroup1.get('5')?.value != null) && this.solicitudGuardada && !isActuFile.includes(5)">

              <div class="mt-2 flex gap-2 items-center cursor-pointer"
                   (click)="viewDocument(formGroup1.get('5')?.value)">

                <!-- Archivos Visibles -->
                <div class="bg-white border-2 border-secondary2 p-2 flex justify-center w-auto">

                  <!-- document -->
                  <div class="w-auto m-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" class="fill-primary2 h-6 w-6 m-auto" viewBox="0 0 384 512">
                      <path
                        d="M64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16l160 0 0 80c0 17.7 14.3 32 32 32l80 0 0 288c0 8.8-7.2 16-16 16L64 464zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-293.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0L64 0zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"/>
                    </svg>
                  </div>

                  <!-- texto info file -->
                  <div class="px-2 w-auto">
                    <p class="truncate text-[8px] font-semibold">
                      Certificado de existencias
                    </p>
                    <p class="truncate text-[8px]">{{
                        (this.formGroup1.get('5')?.value.size /
                          1024).toFixed(2)
                      }} Kb</p>
                  </div>

                  <!-- button borrar -->
                  <button class="m-auto w-auto" (click)="deleteFile(1)">
                    <span class="pi pi-trash w-full h-full sm:text-xl text-base text-primary2 text-medium"></span>
                  </button>

                </div>

              </div>

            </div>

          </div>

          <!-- cargue 6 -->
          <div class="w-full flex flex-col justify-center items-start pt-6 my-auto mb-2 h-full">

            <p class="text-primary3 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[6]}">
              Registro Único Tributario*
            </p>

            <app-file-upload class="mt-2 h-full" [dataClass]="dataClass" [maxFiles]="1" mimes=".pdf"
                             [error]="errorStates[6]" (fileSelected)="onFileSelected($event, 6)"></app-file-upload>

            <div class="w-full"
                 *ngIf="(this.formGroup1.get('6')?.value != '' && this.formGroup1.get('6')?.value != null) && this.solicitudGuardada && !isActuFile.includes(6)">

              <div class="mt-2 flex gap-2 items-center cursor-pointer"
                   (click)="viewDocument(formGroup1.get('6')?.value)">

                <!-- Archivos Visibles -->
                <div class="bg-white border-2 border-secondary2 p-2 flex justify-center w-auto">

                  <!-- document -->
                  <div class="w-auto m-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" class="fill-primary2 h-6 w-6 m-auto" viewBox="0 0 384 512">
                      <path
                        d="M64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16l160 0 0 80c0 17.7 14.3 32 32 32l80 0 0 288c0 8.8-7.2 16-16 16L64 464zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-293.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0L64 0zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"/>
                    </svg>
                  </div>

                  <!-- texto info file -->
                  <div class="px-2 w-auto">
                    <p class="truncate text-[8px] font-semibold">
                      Registro Unico Tributario
                    </p>
                    <p class="truncate text-[8px]">{{
                        (this.formGroup1.get('6')?.value.size /
                          1024).toFixed(2)
                      }} Kb</p>
                  </div>

                  <!-- button borrar -->
                  <button class="m-auto w-auto" (click)="deleteFile(1)">
                    <span class="pi pi-trash w-full h-full sm:text-xl text-base text-primary2 text-medium"></span>
                  </button>

                </div>

              </div>

            </div>

          </div>

        </div>

        <div class="mt-6 w-full flex justify-end gap-4">
          <app-primary-button class="" (click)="changeActiveStep(2, true)">Guardar</app-primary-button>
          <app-primary-button class="" (click)="goToModal(2)">continuar</app-primary-button>
        </div>

      </form>
    </ng-template>


    <!-- formulario 2 -->
    <ng-template #content2>
      <form [formGroup]="formGroup2" class="px-4 md:pl-16 md:pe-16 mt-6 active1 mb-6" *ngIf="activeStep == 2">

        <div class="col-span-2">
          <p class="font-bold">Cargue de documentación*</p>
          <p class="text-primary4 font-[500]">Los campos marcados con * son obligatorios</p>
        </div>

        <!-- contenido 1 -->
        <div class="content1 lg:grid lg:grid-cols-2 md:gap-x-24 lg:gap-x-36 md:flex md:flex-wrap items-center h-full">

          <!-- cargue 7 -->
          <div class="w-full flex flex-col justify-center items-start pt-6 my-auto mb-2 h-full">

            <p class="text-primary3 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[7]}">
              Resolución de habilitación*
            </p>

            <app-file-upload class="mt-2 h-full" [dataClass]="dataClass" mimes=".pdf" [maxFiles]="1"
                             [error]="errorStates[7]" (fileSelected)="onFileSelected($event, 7)"></app-file-upload>

            <div class="w-full"
                 *ngIf="(this.formGroup2.get('7')?.value != '' && this.formGroup2.get('7')?.value != null) && this.solicitudGuardada && !isActuFile.includes(7)">

              <div class="mt-2 flex gap-2 items-center cursor-pointer"
                   (click)="viewDocument(formGroup2.get('7')?.value)">

                <!-- Archivos Visibles -->
                <div class="bg-white border-2 border-secondary2 p-2 flex justify-center w-auto">

                  <!-- document -->
                  <div class="w-auto m-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" class="fill-primary2 h-6 w-6 m-auto" viewBox="0 0 384 512">
                      <path
                        d="M64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16l160 0 0 80c0 17.7 14.3 32 32 32l80 0 0 288c0 8.8-7.2 16-16 16L64 464zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-293.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0L64 0zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"/>
                    </svg>
                  </div>

                  <!-- texto info file -->
                  <div class="px-2 w-auto">
                    <p class="truncate text-[8px] font-semibold">
                      Resolución de habilitación
                    </p>
                    <p class="truncate text-[8px]">{{
                        (this.formGroup2.get('7')?.value.size /
                          1024).toFixed(2)
                      }} Kb</p>
                  </div>

                  <!-- button borrar -->
                  <button class="m-auto w-auto" (click)="deleteFile(1)">
                    <span class="pi pi-trash w-full h-full sm:text-xl text-base text-primary2 text-medium"></span>
                  </button>

                </div>

              </div>

            </div>

          </div>

          <!-- cargue 8 -->
          <div class="w-full flex flex-col justify-center items-start pt-6 my-auto mb-2 h-full">

            <p class="text-primary3 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[8]}">
              Cédula de Ciudadanía del Representante Legal*
            </p>

            <app-file-upload class="mt-2 h-full" [dataClass]="dataClass" mimes=".pdf" [maxFiles]="1"
                             [error]="errorStates[8]" (fileSelected)="onFileSelected($event, 8)"></app-file-upload>

            <div class="w-full"
                 *ngIf="(this.formGroup2.get('8')?.value != '' && this.formGroup2.get('8')?.value != null) && this.solicitudGuardada && !isActuFile.includes(8)">

              <div class="mt-2 flex gap-2 items-center cursor-pointer"
                   (click)="viewDocument(formGroup2.get('8')?.value)">

                <!-- Archivos Visibles -->
                <div class="bg-white border-2 border-secondary2 p-2 flex justify-center w-auto">

                  <!-- document -->
                  <div class="w-auto m-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" class="fill-primary2 h-6 w-6 m-auto" viewBox="0 0 384 512">
                      <path
                        d="M64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16l160 0 0 80c0 17.7 14.3 32 32 32l80 0 0 288c0 8.8-7.2 16-16 16L64 464zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-293.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0L64 0zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"/>
                    </svg>
                  </div>

                  <!-- texto info file -->
                  <div class="px-2 w-auto">
                    <p class="truncate text-[8px] font-semibold">
                      Cédula de ciudadanía
                    </p>
                    <p class="truncate text-[8px]">{{
                        (this.formGroup2.get('8')?.value.size /
                          1024).toFixed(2)
                      }} Kb</p>
                  </div>

                  <!-- button borrar -->
                  <button class="m-auto w-auto" (click)="deleteFile(1)">
                    <span class="pi pi-trash w-full h-full sm:text-xl text-base text-primary2 text-medium"></span>
                  </button>

                </div>

              </div>

            </div>

          </div>

        </div>

        <!-- contenido 2 -->
        <div
          class="content2 lg:grid lg:grid-cols-2 md:gap-x-24 lg:gap-x-36 md:flex md:flex-wrap items-center h-full pt-6">

          <!-- cargue 9 -->
          <div class="w-full flex flex-col justify-center items-start pt-6 my-auto mb-2 h-full">

            <p class="text-primary3 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[9]}">
              Estados financieros de la empresa*
            </p>

            <app-file-upload class="mt-2 h-full" [dataClass]="dataClass" mimes=".pdf" [maxFiles]="1"
                             [error]="errorStates[9]" (fileSelected)="onFileSelected($event, 9)"></app-file-upload>

            <div class="w-full"
                 *ngIf="(this.formGroup2.get('9')?.value != '' && this.formGroup2.get('9')?.value != null) && this.solicitudGuardada && !isActuFile.includes(9)">

              <div class="mt-2 flex gap-2 items-center cursor-pointer"
                   (click)="viewDocument(formGroup2.get('9')?.value)">

                <!-- Archivos Visibles -->
                <div class="bg-white border-2 border-secondary2 p-2 flex justify-center w-auto">

                  <!-- document -->
                  <div class="w-auto m-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" class="fill-primary2 h-6 w-6 m-auto" viewBox="0 0 384 512">
                      <path
                        d="M64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16l160 0 0 80c0 17.7 14.3 32 32 32l80 0 0 288c0 8.8-7.2 16-16 16L64 464zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-293.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0L64 0zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"/>
                    </svg>
                  </div>

                  <!-- texto info file -->
                  <div class="px-2 w-auto">
                    <p class="truncate text-[8px] font-semibold">
                      Estados financieros
                    </p>
                    <p class="truncate text-[8px]">{{
                        (this.formGroup2.get('9')?.value.size /
                          1024).toFixed(2)
                      }} Kb</p>
                  </div>

                  <!-- button borrar -->
                  <button class="m-auto w-auto" (click)="deleteFile(1)">
                    <span class="pi pi-trash w-full h-full sm:text-xl text-base text-primary2 text-medium"></span>
                  </button>

                </div>

              </div>

            </div>

          </div>

          <!-- cargue 10 -->
          <div class="w-full flex flex-col justify-center items-start pt-6 my-auto mb-2 h-full">

            <p class="text-primary3 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[10]}">
              Cédula del contador que firma los estados financieros*
            </p>

            <app-file-upload class="mt-2 h-full" [dataClass]="dataClass" mimes=".pdf" [maxFiles]="1"
                             [error]="errorStates[10]" (fileSelected)="onFileSelected($event, 10)"></app-file-upload>

            <div class="w-full"
                 *ngIf="(this.formGroup2.get('10')?.value != '' && this.formGroup2.get('10')?.value != null) && this.solicitudGuardada && !isActuFile.includes(10)">

              <div class="mt-2 flex gap-2 items-center cursor-pointer"
                   (click)="viewDocument(formGroup2.get('10')?.value)">

                <!-- Archivos Visibles -->
                <div class="bg-white border-2 border-secondary2 p-2 flex justify-center w-auto">

                  <!-- document -->
                  <div class="w-auto m-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" class="fill-primary2 h-6 w-6 m-auto" viewBox="0 0 384 512">
                      <path
                        d="M64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16l160 0 0 80c0 17.7 14.3 32 32 32l80 0 0 288c0 8.8-7.2 16-16 16L64 464zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-293.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0L64 0zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"/>
                    </svg>
                  </div>

                  <!-- texto info file -->
                  <div class="px-2 w-auto">
                    <p class="truncate text-[8px] font-semibold">
                      Cédula del contador
                    </p>
                    <p class="truncate text-[8px]">{{
                        (this.formGroup2.get('10')?.value.size /
                          1024).toFixed(2)
                      }} Kb</p>
                  </div>

                  <!-- button borrar -->
                  <button class="m-auto w-auto" (click)="deleteFile(1)">
                    <span class="pi pi-trash w-full h-full sm:text-xl text-base text-primary2 text-medium"></span>
                  </button>

                </div>

              </div>

            </div>

          </div>

        </div>

        <!-- contenido 3 -->
        <div
          class="content3 lg:grid lg:grid-cols-2 md:gap-x-24 lg:gap-x-36 md:flex md:flex-wrap items-center h-full pt-6">

          <!-- cargue 11 -->
          <div class="w-full flex flex-col justify-center items-start pt-6 my-auto mb-2 h-full">

            <p class="text-primary3 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[11]}">
              Tarjeta profesional y certificado de la junta central de contadores del contador que firma estados
              financieros*
            </p>

            <app-file-upload class="mt-2 h-full" [dataClass]="dataClass" mimes=".pdf" [maxFiles]="1"
                             [error]="errorStates[11]" (fileSelected)="onFileSelected($event, 11)"></app-file-upload>

            <div class="w-full"
                 *ngIf="(this.formGroup2.get('11')?.value != '' && this.formGroup2.get('11')?.value != null) && this.solicitudGuardada && !isActuFile.includes(11)">

              <div class="mt-2 flex gap-2 items-center cursor-pointer"
                   (click)="viewDocument(formGroup2.get('11')?.value)">

                <!-- Archivos Visibles -->
                <div class="bg-white border-2 border-secondary2 p-2 flex justify-center w-auto">

                  <!-- document -->
                  <div class="w-auto m-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" class="fill-primary2 h-6 w-6 m-auto" viewBox="0 0 384 512">
                      <path
                        d="M64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16l160 0 0 80c0 17.7 14.3 32 32 32l80 0 0 288c0 8.8-7.2 16-16 16L64 464zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-293.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0L64 0zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"/>
                    </svg>
                  </div>

                  <!-- texto info file -->
                  <div class="px-2 w-auto">
                    <p class="truncate text-[8px] font-semibold">
                      Tarjeta profesional y certificado
                    </p>
                    <p class="truncate text-[8px]">{{
                        (this.formGroup2.get('11')?.value.size /
                          1024).toFixed(2)
                      }} Kb</p>
                  </div>

                  <!-- button borrar -->
                  <button class="m-auto w-auto" (click)="deleteFile(1)">
                    <span class="pi pi-trash w-full h-full sm:text-xl text-base text-primary2 text-medium"></span>
                  </button>

                </div>

              </div>

            </div>

          </div>

        </div>

        <div class="w-full flex flex-col justify-center items-start pt-6 my-auto mb-2 h-full px-6">
          <!-- combo box lg -->
          <div class="w-full lg:flex flex-col justify-center items-start pt-6 my-auto mb-2 h-full hidden">

            <div class="w-full flex flex-row justify-center items-start pt-6 my-auto gap-4">
              <!-- vehiculos fijados -->
              <div class="w-full">
                <p class="text-primary3 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[3]}">
                  Cantidad vehículos en fijación*
                </p>
                <input
                  class="mt-2 flex-1 shadow-sm rounded-md min-w-[160px] w-full p-[10px] h-[40px] border border-primary3 focus:outline-none focus:border-primary1 bg-transparent"
                  type="number" formControlName="vehiculosFijados" placeholder="0"/>
              </div>
              <!-- vehiculos a incrementar -->
              <div class="w-full">
                <p class="text-primary3 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[0]}">
                  Cantidad vehículos que está
                  requiriendo incrementar*
                </p>
                <input
                  class="mt-2 flex-1 shadow-sm rounded-md min-w-[160px] w-full p-[10px] h-[40px] border border-primary3 focus:outline-none focus:border-primary1 bg-transparent"
                  type="number" formControlName="cantidadVehiculosIncrementar" placeholder="0"/>
              </div>
            </div>


            <div class="w-full flex flex-wrap gap-2 justify-center items-start pt-6 my-auto">
              <div class="w-full flex-1">
                <p class="text-primary3 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[3]}">
                  Total vehículos (fijados e incrementados)
                </p>
                <input
                  class="mt-2 flex-1 shadow-sm rounded-md min-w-[160px] w-full p-[10px] h-[40px] border border-primary3 focus:outline-none focus:border-primary1 bg-transparent"
                  type="number" formControlName="totalVehiculos" placeholder="0"/>
              </div>

              <div class="w-auto flex flex-wrap gap-2">

                <p class="text-primary3 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[1]}">
                  {{ selectedPercentage }} de propiedad de la empresa*
                </p>

                <app-select class="flex-1 w-full lg:w-1/3 mt-2 cursor-pointer"
                            [input]="inputs[1]" [index]="1" [error]="errorStates[1]" [(ngModel)]="inputs[1].value"
                            (inputChange)="onInputChange($event.index, $event.event)"></app-select>

                <input-text class="flex-auto w-full lg:w-1/3 mt-2" [input]="inputs[2]" [index]="2"
                            [error]="errorStates[2]" [disabled]="true"></input-text>

              </div>

            </div>

            <!-- texto informativo -->
            <div class="flex inline-flex md:gap-3 gap-2 h-full w-full mt-2 px-4">
              <span class="lg:w-[8%] sm:w-[10%] w-[8%] h-full flex justify-center lg:px-1 m-auto">
                <img class="w-full m-auto" src="/assets/iconoInfo.svg">
              </span>
              <p class="text-primary1 work-sans text-[11px] mt-2 w-auto">
                Este porcentaje se calcula cuando se digite la cantidad de vehículos
                requerida por el % correspondiente y se debe cargar el certificado
                que avale esa cantidad de vehículos que muestra el campo.
              </p>
            </div>

          </div>
          <!-- combo box responsive -->
          <div class="w-full flex flex-col justify-center items-start pt-6 my-auto mb-2 h-full lg:hidden">

            <!-- Titulos -->
            <div class="w-full flex flex-col justify-center items-start pt-6 my-auto pe-4">
              <p class="text-primary3 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[0]}">
                Cantidad vehículos que está
                requiriendo incrementar*
              </p>

              <div class="w-auto flex flex-wrap gap-2 justify-center items-start pt-6 my-auto">
                <input
                  class="mt-2 flex-auto shadow-sm rounded-md min-w-[160px] w-auto p-[10px] h-[40px] border border-primary3 focus:outline-none focus:border-primary1 bg-transparent"
                  type="number" formControlName="cantidadVehiculosIncrementar" placeholder="0"/>

              </div>

              <p class="text-primary3 mt-4 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[1]}">
                {{ selectedPercentage }} de propiedad de la empresa*
              </p>
              <app-select class="flex-1 w-auto mt-2 cursor-pointer" [input]="inputs[1]" [index]="1"
                          [error]="errorStates[1]"
                          (inputChange)="onInputChange($event.index, $event.event)"></app-select>
              <input-text class="flex-auto w-auto mt-2" [input]="inputs[2]" [index]="2" [error]="errorStates[2]"
                          [disabled]="true"></input-text>
            </div>

            <!-- texto informativo -->
            <p class="text-primary1 pe-4 work-sans text-[11px] mt-2 w-auto">
              Este porcentaje se calcula cuando se digite la cantidad de vehículos
              requerida por el % correspondiente y se debe cargar el certificado
              que avale esa cantidad de vehículos que muestra el campo.
            </p>

          </div>
        </div>

        <div class="mt-6 w-full flex flex-wrap justify-end gap-4">
          <button type="button" (click)="changeActiveStep(1, false)"
                  class="inline-flex items-center justify-center px-6 py-1 text-white bg-primary4 hover:bg-primary2 focus:bg-primary2 font-medium rounded-full text-[16px] work-sans text-center">
            Regresar
          </button>
          <app-primary-button class="" (click)="changeActiveStep(3, true)">Guardar</app-primary-button>
          <app-primary-button class="" (click)="goToModal(3)">continuar</app-primary-button>
        </div>

      </form>
    </ng-template>


    <!-- formulario 3 -->
    <ng-template #content3>
      <form [formGroup]="formGroup3" class="px-4 md:pl-16 md:pe-16 mt-6 active1 mb-6" *ngIf="activeStep == 3"
            (ngSubmit)="changeActiveStep(4, true)">
        <div class="col-span-2">
          <p class="font-bold">Digitar los siguientes campos*</p>
          <p class="text-primary4 font-[500]">Los campos marcados con * son obligatorios</p>
        </div>

        <!-- contenido 1 -->
        <div class="content1 md:grid md:grid-cols-2 md:gap-x-36 md:flex items-center h-full">

          <!-- cargue 12 -->
          <div class="w-full flex flex-col justify-center items-start pt-6 my-auto mb-2 h-full">
            <p class="text-primary3 font-semibold" [ngClass]="{'!text-error !font-normal': errorStates[12]}">
              Certificado del {{ selectedPercentage }} de propiedad de la empresa*
            </p>
            <app-file-upload class="mt-2 h-full" [dataClass]="dataClass" mimes=".pdf" [maxFiles]="1"
                             [error]="errorStates[12]" (fileSelected)="onFileSelected($event, 12)"></app-file-upload>

            <div class="w-full"
                 *ngIf="(this.formGroup3.get('12')?.value != '' && this.formGroup3.get('12')?.value != null) && this.solicitudGuardada && !isActuFile.includes(12)">

              <div class="mt-2 flex gap-2 items-center cursor-pointer"
                   (click)="viewDocument(formGroup3.get('12')?.value)">

                <!-- Archivos Visibles -->
                <div class="bg-white border-2 border-secondary2 p-2 flex justify-center w-auto">

                  <!-- document -->
                  <div class="w-auto m-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" class="fill-primary2 h-6 w-6 m-auto" viewBox="0 0 384 512">
                      <path
                        d="M64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16l160 0 0 80c0 17.7 14.3 32 32 32l80 0 0 288c0 8.8-7.2 16-16 16L64 464zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-293.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0L64 0zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"/>
                    </svg>
                  </div>

                  <!-- texto info file -->
                  <div class="px-2 w-auto">
                    <p class="truncate text-[8px] font-semibold">
                      Certificado de propiedad
                    </p>
                    <p class="truncate text-[8px]">{{
                        (this.formGroup3.get('12')?.value.size /
                          1024).toFixed(2)
                      }} Kb</p>
                  </div>

                  <!-- button borrar -->
                  <button class="m-auto w-auto" (click)="deleteFile(1)">
                    <span class="pi pi-trash w-full h-full sm:text-xl text-base text-primary2 text-medium"></span>
                  </button>

                </div>

              </div>

            </div>

          </div>

          <!-- input 1 -->
          <div class="w-full flex flex-col justify-center items-start pt-6 my-auto mb-2 h-full">

            <p class="text-primary3 font-semibold h-full">
              Capital pagado en SMLV*
            </p>

            <!-- input -->
            <div class="mt-2 relative w-full">
              <input
                class="shadow-sm rounded-md min-w-[160px] w-full p-[10px] h-[40px] border border-primary3 focus:outline-none focus:border-primary1 bg-transparent"
                type="text" formControlName="capital_social" placeholder="$"
                (input)="onCurrencyInput($event, 'capital_social', formGroup3)" (focus)="onCurrencyFocus($event)"/>
              <div class="w-full relative">
                <!-- Icono de error (rojo) -->
                <span
                  *ngIf="formGroup3.get('capital_social')?.invalid && (formGroup3.get('capital_social')?.touched || submitted)"
                  class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                  <span class="pi pi-exclamation-circle text-error text-[24px]"></span>
                </span>

                <!-- Icono de éxito (verde) -->
                <span
                  *ngIf="formGroup3.get('capital_social')?.valid && (formGroup3.get('capital_social')?.touched || submitted)"
                  class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                  <span class="pi pi-check-circle text-success text-[24px]"></span>
                </span>
              </div>
              <span *ngIf="submitted && formGroup3.get('capital_social')?.errors?.['required']" class="text-error">
                Capital pagado es obligatorio
              </span>
              <span
                *ngIf="formGroup3.get('capital_social')?.hasError('negativeNumber') && (formGroup3.get('capital_social')?.touched || submitted)"
                class="text-error">
                El numeró no puede ser negativo
              </span>
            </div>

            <!-- texto informativo -->
            <div class="flex inline-flex md:gap-3 gap-2 h-full w-full mt-2">

              <span class="lg:w-[12%] sm:w-[12%] w-[10%] h-full flex justify-center lg:px-1 m-auto">
                <img class="w-full m-auto" src="/assets/iconoInfo.svg">
              </span>

              <p class="text-primary1 work-sans text-[11px] mt-2 w-auto">
                {{ dynamicText }}
              </p>

            </div>

          </div>

        </div>

        <!-- contenido 2 -->
        <div class="content2 md:grid sm:grid-cols-2 md:gap-x-36 md:flex items-center h-full pt-6">

          <!-- input 2 -->
          <div class="w-full flex flex-col justify-center items-start pt-6 my-auto h-full">
            <p class="text-primary3 font-semibold h-full">
              Patrimonio Líquido en SMLV*
            </p>

            <!-- input -->
            <div class="mt-2 relative w-full">
              <input
                class="shadow-sm rounded-md min-w-[160px] w-full p-[10px] h-[40px] border border-primary3 focus:outline-none focus:border-primary1 bg-transparent"
                type="text" formControlName="patrimonio_liquido" placeholder="$"
                (input)="onCurrencyInput($event, 'patrimonio_liquido', formGroup3)" (focus)="onCurrencyFocus($event)"/>
              <div class="w-full relative">
                <!-- Icono de error (rojo) -->
                <span
                  *ngIf="formGroup3.get('patrimonio_liquido')?.invalid && (formGroup3.get('patrimonio_liquido')?.touched || submitted)"
                  class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                  <span class="pi pi-exclamation-circle text-error text-[24px]"></span>
                </span>

                <!-- Icono de éxito (verde) -->
                <span
                  *ngIf="formGroup3.get('patrimonio_liquido')?.valid && (formGroup3.get('patrimonio_liquido')?.touched || submitted)"
                  class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                  <span class="pi pi-check-circle text-success text-[24px]"></span>
                </span>
              </div>
              <span *ngIf="submitted && formGroup3.get('patrimonio_liquido')?.errors?.['required']" class="text-error">
                Patrimonio Liquido es obligatorio
              </span>
              <span
                *ngIf="formGroup3.get('patrimonio_liquido')?.hasError('negativeNumber') && (formGroup3.get('patrimonio_liquido')?.touched || submitted)"
                class="text-error">
                El numeró no puede ser negativo
              </span>
            </div>

            <!-- texto informativo -->
            <div class="flex inline-flex md:gap-3 gap-2 h-full w-full mt-2">

              <span class="lg:w-[12%] sm:w-[12%] w-[10%] h-full flex justify-center lg:px-1 m-auto">
                <img class="w-full m-auto" src="/assets/iconoInfo.svg">
              </span>

              <p class="text-primary1 work-sans text-[11px] mt-2 w-auto">
                {{ dynamicText }}
              </p>

            </div>

          </div>

        </div>

        <div class="mt-6 w-full flex justify-end gap-4">
          <button type="button" (click)="changeActiveStep(2, false, true)"
                  class="inline-flex items-center justify-center px-6 py-1 text-white bg-primary4 hover:bg-primary2 focus:bg-primary2 font-medium rounded-full text-[16px] work-sans text-center">
            Regresar
          </button>
          <app-primary-button type="submit" class="">Guardar</app-primary-button>
          <!-- <app-primary-button type="button" (click)="goToModal(4)" class="">continuar</app-primary-button> -->
        </div>

      </form>
    </ng-template>


  </div>
  <!-- contenido operativo -->
  <div class="md:col-span-8 sm:col-span-7 w-auto sm:mt-10 mt-4 md:px-8 px-2" *ngIf="activeNum == '1'">
    <h3 class="text-primary1 !font-bold">Incremento de Capacidad Transportadora</h3>

    <!--formulario 4 -->
    <form [formGroup]="formGroup4" class="px-4 md:pl-16 md:pe-16 mt-6 active1 mb-16"
          *ngFor="let file of this.formGroup1.get('1')?.value; let index = index"
          [ngClass]="{ 'hidden': index !== currentContractIteration }" (ngSubmit)="onSubmitAllForms()">
      <div class="col-span-2">
        <p class="font-bold">Digitar los siguientes campos*</p>
        <p class="text-primary4 font-[500] pt-4">Los campos marcados con * son obligatorios</p>

        <!-- texto informativo -->
        <div class="md:w-4/6 flex inline-flex md:gap-3 gap-2 h-full w-full mt-2">

          <span class="lg:w-[7%] sm:w-[8%] w-[10%] h-full flex justify-center lg:px-1 m-auto">
            <img class="w-full m-auto" src="/assets/iconoInfo.svg">
          </span>
          <p class="text-primary1 work-sans text-[11px] mt-2 w-auto">
            Con el fin de identificar cuantas veces tiene que digitar la siguiente información, teniendo en
            cuenta que esta información se debe diligenciar por cada uno de los contratos.
          </p>
        </div>
        <h3 class="mt-2">
          {{ this.fileNames[1][currentContractIteration] + formGroup4.get('numeroContrato')?.value }}
        </h3>

      </div>

      <!-- content 1 -->
      <div class="content1 md:grid sm:grid-cols-2 md:grid-cols-7 md:gap-x-4 md:flex items-center h-full">


        <!-- input 3 Cantidad de contratos* -->
        <div class="w-full flex flex-col justify-center items-start pt-6 my-auto h-full">
          <p class="text-primary3 font-semibold">
            Cantidad de contratos*
          </p>
          <!-- input -->
          <div class="mt-2 relative w-full h-full">
            <input
              class="shadow-sm rounded-md w-full p-[10px] h-[40px] border border-primary3 focus:outline-none focus:border-primary1 bg-transparent disabled:bg-secondary3 disabled:border-secondary2 disabled:text-secondary2"
              type="number" formControlName="cantidad_contratos" placeholder="Ingrese número">
            <div class="w-full relative">

              <!-- Icono de éxito (verde) -->
              <span
                *ngIf="formGroup4.get('cantidad_contratos')?.valid && (formGroup4.get('cantidad_contratos')?.touched || submitted)"
                class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                <span class="pi pi-check-circle text-success text-[24px]"></span>
              </span>
            </div>

          </div>

        </div>

        <!-- input 4 N° de contrato* -->
        <div class="w-full col-span-2 flex flex-col justify-center items-start pt-6 my-auto h-full">
          <p class="text-primary3 font-semibold">
            N° de contrato*
          </p>
          <!-- input -->
          <div class="mt-2 w-full relative h-full">
            <input
              class="shadow-sm rounded-md min-w-[160px] w-full p-[10px] h-[40px] border border-primary3 focus:outline-none focus:border-primary1 bg-transparent"
              type="text" formControlName="numeroContrato" required placeholder="Ingrese número contrato">
            <div class="w-full relative">
              <!-- Icono de error (rojo) -->
              <span
                *ngIf="formGroup4.get('numeroContrato')?.invalid && (formGroup4.get('numeroContrato')?.touched || submitted)"
                class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                <span class="pi pi-exclamation-circle text-error text-[24px]"></span>
              </span>

              <!-- Icono de éxito (verde) -->
              <span
                *ngIf="formGroup4.get('numeroContrato')?.valid && (formGroup4.get('numeroContrato')?.touched || submitted)"
                class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                <span class="pi pi-check-circle text-success text-[24px]"></span>
              </span>
            </div>
            <span *ngIf="submitted && formGroup4.get('numeroContrato')?.errors?.['required']" class="text-error">
              El numero de contrato es obligatorio
            </span>

          </div>

        </div>

        <!-- input 5.1 nit contratante -->
        <div class="w-full col-span-2 flex flex-col justify-center items-start pt-6 my-auto h-full">

          <p class="text-primary3 font-semibold">
            NIT de empresa contratante*
          </p>

          <!-- input -->
          <div class="mt-2 relative w-full h-full">
            <input
              class="shadow-sm rounded-md min-w-[160px] w-full p-[10px] h-[40px] border border-primary3 focus:outline-none focus:border-primary1 bg-transparent"
              type="text" formControlName="nitContratante" required placeholder="Ingrese NIT contratante">
            <div class="w-full relative">
              <!-- Icono de error (rojo) -->
              <span
                *ngIf="formGroup4.get('nitContratante')?.invalid && (formGroup4.get('nitContratante')?.touched || submitted)"
                class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                <span class="pi pi-exclamation-circle text-error text-[24px]"></span>
              </span>

              <!-- Icono de éxito (verde) -->
              <span
                *ngIf="formGroup4.get('nitContratante')?.valid && (formGroup4.get('nitContratante')?.touched || submitted)"
                class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                <span class="pi pi-check-circle text-success text-[24px]"></span>
              </span>
            </div>
            <span *ngIf="submitted && formGroup4.get('nitContratante')?.errors?.['required']" class="text-error">
              NIT de empresa contratante es obligatorio
            </span>
          </div>

        </div>

        <!-- input 5 Contratante* -->
        <div class="w-full col-span-2 flex flex-col justify-center items-start pt-6 my-auto h-full">
          <p class="text-primary3 font-semibold">
            Contratante*
          </p>
          <!-- input -->
          <div class="mt-2 relative w-full h-full">
            <input
              class="shadow-sm rounded-md min-w-[160px] w-full p-[10px] h-[40px] border border-primary3 focus:outline-none focus:border-primary1 bg-transparent disabled:bg-secondary3 disabled:border-secondary2 disabled:text-secondary2"
              type="text" formControlName="contratante" required placeholder="Nombre de empresa contratante">
            <div class="w-full relative">
              <!-- Icono de error (rojo) -->
              <span
                *ngIf="formGroup4.get('contratante')?.invalid && (formGroup4.get('contratante')?.touched || submitted)"
                class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                <span class="pi pi-exclamation-circle text-error text-[24px]"></span>
              </span>

              <!-- Icono de éxito (verde) -->
              <span
                *ngIf="formGroup4.get('contratante')?.valid && (formGroup4.get('contratante')?.touched || submitted)"
                class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                <span class="pi pi-check-circle text-success text-[24px]"></span>
              </span>
            </div>
            <span *ngIf="submitted && formGroup4.get('contratante')?.errors?.['required']" class="text-error">
              El Contratante es obligatorio
            </span>
            <span
              *ngIf="formGroup4.get('contratante')?.hasError('negativeNumber') && (formGroup4.get('contratante')?.touched || submitted)"
              class="text-error">
              El numeró no puede ser negativo
            </span>
            <span
              *ngIf="formGroup4.get('contratante')?.hasError('nitInvalido') && (formGroup4.get('contratante')?.touched || submitted)"
              class="text-error">
              El contratante no se encuentra registrado en rues
            </span>
          </div>

        </div>
      </div>

      <!-- contenido 2 -->
      <div class="content1 md:grid sm:grid-cols-2 md:grid-cols-3 md:gap-x-24 md:flex items-center h-full">

        <!-- input 4 -->
        <div class="w-full flex flex-col justify-center items-start pt-6 my-auto h-full">

          <p class="text-primary3 font-semibold h-full">
            Fecha y hora de inicio*
          </p>

          <div class="mt-2 relative w-full">

            <input
              class="shadow-sm rounded-md w-full p-[10px] h-[40px] border border-primary3 focus:outline-none focus:border-primary1 bg-transparent"
              type="datetime-local" formControlName="fecha_inicio" required placeholder="dd/mm/aaaa --:--">

            <span *ngIf="submitted && formGroup4.get('fecha_inicio')?.errors?.['required']" class="text-error">
              Fecha y hora de inicio son obligatorias
            </span>

          </div>

        </div>

        <!-- input 5 -->
        <div class="w-full flex flex-col justify-center items-start pt-6 my-auto h-full">

          <p class="text-primary3 font-semibold h-full">
            Fecha y hora de terminación*
          </p>

          <!-- input -->
          <div class="mt-2 relative w-full">
            <input
              class="shadow-sm rounded-md w-full p-[10px] h-[40px] border border-primary3 focus:outline-none focus:border-primary1 bg-transparent"
              type="datetime-local" formControlName="fecha_terminacion" required placeholder="dd/mm/aaaa --:--">

            <span *ngIf="submitted && formGroup4.get('fecha_terminacion')?.errors?.['required']" class="text-error">
              Fecha de terminación es obligatorio
            </span>

            <span
              *ngIf="formGroup4.hasError('dateRangeInvalid') && (formGroup4.get('fecha_terminacion')?.touched || submitted)"
              class="text-error">
              La fecha de terminación no puede ser anterior a la fecha de inicio.
            </span>

          </div>

        </div>


        <!-- Select 1 -->
        <div class="w-full flex flex-col justify-center items-start pt-6 my-auto h-full">

          <p class="text-primary3 font-semibold h-full">
            Duración en meses*
          </p>

          <!-- input que muestra la duración -->
          <div class="w-full relative mt-2">
            <input
              class="shadow-sm rounded-md w-full p-[10px] h-[40px] border border-primary3 focus:outline-none focus:border-primary1 bg-transparent disabled:bg-secondary3 disabled:border-secondary2 disabled:text-secondary2"
              type="number" formControlName="duracionMeses" placeholder="Duración en meses">

            <span class="lg:text-xs sm:text-[10px] text-success">
              Duración calculada automáticamente.
            </span>

          </div>

        </div>

      </div>

      <!-- contenido 3 -->
      <div class="content1 md:grid sm:grid-cols-2 md:grid-cols-3 md:gap-x-24 md:flex items-center h-full">

        <!-- select3 Clase de vehículo* -->
        <div class="w-full flex flex-col justify-center items-start pt-6 my-auto h-full">
          <p class="text-primary3 font-semibold h-full">
            Clase de vehículo*
          </p>

          <!-- select -->
          <div class="w-full relative mt-2">
            <!-- Selector principal -->
            <div (click)="toggleDropdown(0)"
                 [ngClass]="{'text-error !border border-error': formGroup4.get('idClaseVehiculo')?.invalid && (formGroup4.get('idClaseVehiculo')?.touched || formGroup4.get('idClaseVehiculo')?.dirty)}"
                 class="cursor-pointer shadow-sm min-w-[160px] w-full p-[10px] min-h-[40px] bg-transparent border-2 border-secondary1 focus:outline-none focus:border-primary1 flex justify-between items-center">
              <span *ngIf="!selectedOptionsClase.length" class="font-[500] text-xs">Seleccione</span>
              <span *ngIf="selectedOptionsClase.length" class="text-normal">{{
                  getSelectedLabels('idClaseVehiculo')
                }}</span>

              <i class="pi pi-chevron-down text-primary2 text-xs"
                 [ngClass]="{'!text-error': formGroup4.get('idClaseVehiculo')?.invalid && (formGroup4.get('idClaseVehiculo')?.touched || formGroup4.get('idClaseVehiculo')?.dirty)}"></i>
            </div>

            <!-- Opciones desplegables -->
            <ul *ngIf="selects[0].isDropdownOpen"
                class="absolute z-20 bg-secondary4 border border-primary1 shadow-md rounded-bl-md rounded-br-md w-full mt-1 max-h-48 overflow-y-auto">
              <li *ngFor="let option of ClaseVehiculo" (click)="toggleOption(option, 'idClaseVehiculo')"
                  class="cursor-pointer px-4 py-2 hover:bg-secondary1 flex items-center">

                <!-- Estilo personalizado -->
                <div class="mr-2 !border-2 !border-primary1 rounded-md !h-5 !w-5 flex items-center justify-center"
                     [ngClass]=" {'!bg-primary1 text-white': isSelected(option, 'idClaseVehiculo')}">
                  <span *ngIf="isSelected(option, 'idClaseVehiculo')"> &#10003; </span>
                </div>
                {{ option.label }}


              </li>
            </ul>

            <!-- Mensajes de validación -->
            <span class="text-sm text-success"
                  *ngIf="formGroup4.get('idClaseVehiculo')?.valid && formGroup4.get('idClaseVehiculo')?.touched">
              Selección válida
            </span>
            <span class="text-sm text-error"
                  *ngIf="formGroup4.get('idClaseVehiculo')?.invalid && (formGroup4.get('idClaseVehiculo')?.touched || formGroup4.get('idClaseVehiculo')?.dirty)">
              {{ selects[0].errorMessage }}
            </span>

          </div>

        </div>

        <!-- Contenedor principal del FormArray -->
        <div class="w-full md:col-span-2" formArrayName="idClaseVehiculos">
          <p class="text-primary3 font-semibold h-full">
            Cantidad vehículo / contrato*
          </p>
          <!-- Headers dinámicos -->
          <div class="headers-container flex flex-wrap gap-4 mt-2">
            <button type="button" *ngFor="let vehiculo of idClaseVehiculos.controls; let i = index"
                    (click)="setActiveHeader(i)"
                    [ngClass]="{'active-header': activeHeader === i, 'inactive-header': activeHeader !== i}"
                    class="p-2 text-primary1 border-b-2">
              {{ getSelectedLabelsHeaders()[i] || 'Clase Vehículo ' + (i + 1) }}
            </button>

          </div>


          <!-- Inputs dinámicos basados en el header activo -->
          <div *ngIf="activeHeader != null" class="inputs-container mt-2">
            <div *ngFor="let vehiculo of idClaseVehiculos.controls; let i = index" [formGroupName]="i"
                 [ngClass]="{'hidden': activeHeader != i}"
                 class="w-full flex flex-col justify-center items-start pt-6 my-auto h-full">

              <!-- Input para el número de vehículos -->
              <div class="mt-2 relative w-full">

                <input
                  class="shadow-sm rounded-md min-w-[160px] w-full p-[10px] h-[40px] border border-primary3 focus:outline-none focus:border-primary1 bg-transparent"
                  type="number" formControlName="cantidadVehiculos" required placeholder="N° de Vehículos / Contrato">

                <div class="w-full relative">
                  <!-- Icono de error (rojo) -->
                  <span
                    *ngIf="formGroup4.get('idClaseVehiculos')?.get(activeHeader.toString())?.get('cantidadVehiculos')?.invalid && (formGroup4.get('idClaseVehiculos')?.get(activeHeader.toString())?.get('cantidadVehiculos')?.touched || submitted)"
                    class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                    <span class="pi pi-exclamation-circle text-error text-[24px]"></span>
                  </span>

                  <!-- Icono de éxito (verde) -->
                  <span
                    *ngIf="formGroup4.get('idClaseVehiculos')?.get(activeHeader.toString())?.get('cantidadVehiculos')?.valid && (formGroup4.get('idClaseVehiculos')?.get(activeHeader.toString())?.get('cantidadVehiculos')?.touched || submitted)"
                    class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                    <span class="pi pi-check-circle text-success text-[24px]"></span>
                  </span>
                </div>

                <!-- Mensajes de error -->
                <span
                  *ngIf="submitted && formGroup4.get('idClaseVehiculos')?.get(activeHeader.toString())?.get('cantidadVehiculos')?.errors?.['required']"
                  class="text-error">
                  N° de Vehículos es obligatorio para {{
                    getSelectedLabelsHeaders()[activeHeader] || 'Clase Vehículo ' +
                    (activeHeader + 1)
                  }}
                </span>

                <span
                  *ngIf="formGroup4.get('idClaseVehiculos')?.get(activeHeader.toString())?.get('cantidadVehiculos')?.hasError('negativeNumber') && (formGroup4.get('idClaseVehiculos')?.get(activeHeader.toString())?.get('cantidadVehiculos')?.touched || submitted)"
                  class="text-error">
                  El número de vehículos no puede ser negativo para {{
                    getSelectedLabelsHeaders()[activeHeader] || 'Clase Vehículo ' +
                    (activeHeader + 1)
                  }}
                </span>
              </div>

            </div>

          </div>

        </div>

      </div>

      <!-- contenido 4 -->
      <div class="content1 md:grid sm:grid-cols-2 md:grid-cols-3 md:gap-x-24 md:flex items-center h-full">

        <!-- select 4 -->
        <div class="w-full flex flex-col justify-center items-start pt-6 my-auto h-full">

          <p class="text-primary3 font-semibold h-full">
            Forma de pago*
          </p>

          <!-- select -->
          <div class="w-full relative mt-2">

            <div (click)="toggleDropdown(2)"
                 [ngClass]="{'text-error !border border-error': formGroup4.get('forma_pago')?.invalid && (formGroup4.get('forma_pago')?.touched || formGroup4.get('forma_pago')?.dirty)}"
                 class="cursor-pointer shadow-sm min-w-[160px] w-full p-[10px] h-[40px] bg-transparent border-2 border-secondary1 focus:outline-none focus:border-primary1 flex justify-between items-center">
              <span *ngIf="!selects[2].value" class="font-[500] text-xs">Seleccione</span>
              <span *ngIf="selects[2].value" class="text-normal">{{
                  formGroup4.get('forma_pago')?.value.label
                }}</span>

              <i class="pi pi-chevron-down text-primary2 text-xs"
                 [ngClass]="{'!text-error': formGroup4.get('forma_pago')?.invalid && (formGroup4.get('forma_pago')?.touched || formGroup4.get('forma_pago')?.dirty)}"></i>
            </div>

            <ul *ngIf="selects[2].isDropdownOpen"
                class="absolute z-20 bg-secondary4 border border-primary1 shadow-md rounded-bl-md rounded-br-md w-full mt-1 max-h-48 overflow-y-auto">
              <li *ngFor="let option of formaPago" (click)="selectOption(2, option, 'forma_pago')"
                  class="cursor-pointer px-4 py-2 hover:bg-primary1 hover:text-white">
                {{ option.label }}
              </li>
            </ul>
            <!-- Mensajes de validación -->
            <span class="text-sm text-success"
                  *ngIf="formGroup4.get('forma_pago')?.valid && formGroup4.get('forma_pago')?.touched">
              Selección válida
            </span>
            <span class="text-sm text-error"
                  *ngIf="formGroup4.get('forma_pago')?.invalid && (formGroup4.get('forma_pago')?.touched || formGroup4.get('forma_pago')?.dirty)">
              {{ selects[2].errorMessage }}
            </span>

          </div>

        </div>

        <!-- select 5 -->
        <div class="w-full flex flex-col justify-center items-start pt-6 my-auto h-full">

          <p class="text-primary3 font-semibold h-full">
            Áreas de Operación*
          </p>

          <!-- select -->
          <div class="w-full relative mt-2">

            <!-- Selector principal -->
            <div (click)="toggleDropdown(3)"
                 [ngClass]="{'text-error !border border-error': formGroup4.get('idAreaOperacion')?.invalid && (formGroup4.get('idAreaOperacion')?.touched || formGroup4.get('idAreaOperacion')?.dirty)}"
                 class="cursor-pointer shadow-sm min-w-[160px] w-full p-[10px] min-h-[40px] bg-transparent border-2 border-secondary1 focus:outline-none focus:border-primary1 flex justify-between items-center">
              <span *ngIf="!selectedOptionsDeparts.length" class="font-[500] text-xs">Seleccione</span>
              <span *ngIf="selectedOptionsDeparts.length" class="text-normal">{{
                  getSelectedLabels('idAreaOperacion')
                }}</span>

              <i class="pi pi-chevron-down text-primary2 text-xs"
                 [ngClass]="{'!text-error': formGroup4.get('idAreaOperacion')?.invalid && (formGroup4.get('idAreaOperacion')?.touched || formGroup4.get('idAreaOperacion')?.dirty)}"></i>
            </div>

            <!-- Opciones desplegables -->
            <ul *ngIf="selects[3].isDropdownOpen"
                class="absolute z-20 bg-secondary4 border border-primary1 shadow-md rounded-bl-md rounded-br-md w-full mt-1 max-h-48 overflow-y-auto">
              <li *ngFor="let option of departs" (click)="toggleOption(option, 'idAreaOperacion')"
                  class="cursor-pointer px-4 py-2 hover:bg-secondary1 flex items-center">

                <!-- Estilo personalizado -->
                <div class="mr-2 !border-2 !border-primary1 rounded-md !h-5 !w-5 flex items-center justify-center"
                     [ngClass]=" {'!bg-primary1 text-white': isSelected(option, 'idAreaOperacion')}">
                  <span *ngIf="isSelected(option, 'idAreaOperacion')"> &#10003; </span>
                </div>
                {{ option.label }}

              </li>
            </ul>
            <!-- Mensajes de validación -->
            <span class="text-sm text-success"
                  *ngIf="formGroup4.get('idAreaOperacion')?.valid && formGroup4.get('idAreaOperacion')?.touched">
              Selección válida
            </span>

            <span class="text-sm text-error"
                  *ngIf="formGroup4.get('idAreaOperacion')?.invalid && (formGroup4.get('idAreaOperacion')?.touched || formGroup4.get('idAreaOperacion')?.dirty)">
              {{ selects[3].errorMessage }}
            </span>

          </div>

        </div>

        <!-- select 6 -->
        <div class="w-full flex flex-col justify-center items-start pt-6 my-auto h-full">

          <p class="text-primary3 font-semibold h-full" [ngClass]="{'!text-error !font-normal': errorStates[16]}">
            Tiempos estimados (En horas) - Disponibilidad de Vehículos*
          </p>

          <!-- select -->
          <div class="w-full relative mt-2">

            <div (click)="toggleDropdown(4)"
                 [ngClass]="{'text-error !border border-error': formGroup4.get('disponibilidad')?.invalid && (formGroup4.get('disponibilidad')?.touched || formGroup4.get('disponibilidad')?.dirty)}"
                 class="cursor-pointer shadow-sm min-w-[160px] w-full p-[10px] h-[40px] bg-transparent border-2 border-secondary1 focus:outline-none focus:border-primary1 flex justify-between items-center">
              <span *ngIf="!selects[4].value" class="font-[500] text-xs">Seleccione</span>
              <span *ngIf="selects[4].value" class="text-normal">{{
                  formGroup4.get('disponibilidad')?.value.label
                }}</span>

              <i class="pi pi-chevron-down text-primary2 text-xs"
                 [ngClass]="{'!text-error': formGroup4.get('disponibilidad')?.invalid && (formGroup4.get('disponibilidad')?.touched || formGroup4.get('disponibilidad')?.dirty)}"></i>
            </div>

            <ul *ngIf="selects[4].isDropdownOpen"
                class="absolute z-20 bg-secondary4 border border-primary1 shadow-md rounded-bl-md rounded-br-md w-full mt-1 max-h-48 overflow-y-auto">
              <li *ngFor="let option of horas" (click)="selectOption(4, option, 'disponibilidad')"
                  class="cursor-pointer px-4 py-2 hover:bg-primary1 hover:text-white">
                {{ option.label }}
              </li>
            </ul>
            <!-- Mensajes de validación -->
            <span class="text-sm text-success"
                  *ngIf="formGroup4.get('disponibilidad')?.valid && formGroup4.get('disponibilidad')?.touched">
              Selección válida
            </span>
            <span class="text-sm text-error"
                  *ngIf="formGroup4.get('disponibilidad')?.invalid && (formGroup4.get('disponibilidad')?.touched || formGroup4.get('ClaseVehiculo')?.dirty)">
              {{ selects[4].errorMessage }}
            </span>

          </div>

        </div>

      </div>

      <!-- contenido 5 -->
      <div class="content1 md:grid sm:grid-cols-2 md:grid-cols-3 md:gap-x-24 md:flex items-center h-full">

        <!-- input 6 -->
        <div class="w-full flex flex-col justify-center items-start pt-6 my-auto h-full">

          <p class="text-primary3 font-semibold h-full" [ngClass]="{'!text-error !font-normal': errorStates[13]}">
            Valor del Contrato*
          </p>

          <!-- input -->
          <div class="mt-2 relative w-full">
            <input
              class="shadow-sm rounded-md min-w-[160px] w-full p-[10px] h-[40px] border border-primary3 focus:outline-none focus:border-primary1 bg-transparent"
              type="text" formControlName="valorContrato" placeholder="$"
              (input)="onCurrencyInput($event, 'valorContrato', formGroup4)" (focus)="onCurrencyFocus($event)"/>
            <div class="w-full relative">
              <!-- Icono de error (rojo) -->
              <span
                *ngIf="formGroup4.get('valorContrato')?.invalid && (formGroup4.get('valorContrato')?.touched || submitted)"
                class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                <span class="pi pi-exclamation-circle text-error text-[24px]"></span>
              </span>

              <!-- Icono de éxito (verde) -->
              <span
                *ngIf="formGroup4.get('valorContrato')?.valid && (formGroup4.get('valorContrato')?.touched || submitted)"
                class="absolute top-[-33px] right-0 flex items-center pr-[10px]">
                <span class="pi pi-check-circle text-success text-[24px]"></span>
              </span>
            </div>

            <span *ngIf="submitted && formGroup4.get('valorContrato')?.errors?.['required']" class="text-error">
              Valor Contrato es obligatorio
            </span>

            <span
              *ngIf="formGroup4.get('valorContrato')?.hasError('negativeNumber') && (formGroup4.get('valorContrato')?.touched || submitted)"
              class="text-error">
              El numeró no puede ser negativo
            </span>

          </div>

        </div>

      </div>

      <div class="mt-6 w-full flex justify-end gap-4">
        <app-primary-button type="submit" class="">Guardar y continuar</app-primary-button>
      </div>

    </form>

  </div>

</div>

<!-- APP ALERT continuar sin guardar -->
<app-alert [showModal]="showModalContinuar" title="Continuar sin guardar" subtitle=""
           message="Esta seguro que desea continuar sin guardar." cancelButtonText="Cerrar" [showCancelButton]="true"
           buttonText="Continuar" [showFirstButton]="true" (close)="showModalContinuar = false"
           (closeByButton1)="changeActiveStep(numberTocontinue, false)" TypeAlert="warning"></app-alert>

<!-- APP ALERT REQUISITO CAPITAL SOCIAL Y PATRIMONIO -->
<app-alert [showModal]="showModalRequisito" title="No cumple requisito" subtitle=""
           message="{{ valid1 ? 'No se cumple con el requisito mínimo de patrimonio liquido (menor a 180 SMLMV)' :valid2 ? 'No se cumple con el requisito mínimo de capital social (300 SMLMV)' : 'No se cumple con el requisito mínimo de capital social (300 SMLMV) y patrimonio liquido (180 SMLMV)'  }}"
           cancelButtonText="Cerrar" [showCancelButton]="true" [showFirstButton]="false"
           (close)="showModalRequisito = false"
           textColor="text-waring" TypeAlert="warning"></app-alert>


<!-- modal de loading -->
<app-alert [showModal]="ShowLoadingModal" title="Verificando datos" subtitle="Un momento por favor."
           message="Se está guardando los datos enviados" [showFirstButton]="false" [showCancelButton]="false"
           TypeAlert="loader"></app-alert>

<!-- Modal DE INFORMACION GUARDADA -->
<app-alert [showModal]="showModalInfoSaved" title="Información guardada" textColor="text-success" [showSubtitle]="false"
           [message]="' La información se ha cargado correctamente'" buttonText="Continuar" [isIcon]="false"
           [showFirstButton]="true" [showCancelButton]="false" TypeAlert="success" (close)="showModalInfoSaved = false"
           (closeByButton1)="numberTocontinueSaved == 5 ? changeActiveNum('1') : changeActiveStep(numberTocontinueSaved, false)"
           (closeByBackdrop)="numberTocontinueSaved == 5 ? changeActiveNum('1') : changeActiveStep(numberTocontinueSaved, false)"
           (close)="showModalInfoSaved = true"></app-alert>

<!-- Modal DE INFORMACION GUARDADA OPERATIVO -->
<app-alert [showModal]="showModalInfoSaved1" title="Información guardada" textColor="text-success"
           [showSubtitle]="false" [message]="' La información se ha cargado correctamente'" buttonText="Continuar"
           [isIcon]="false" [showFirstButton]="true" [showCancelButton]="false" TypeAlert="success"
           (close)="showModalInfoSaved1 = false" (closeByButton1)="changeContratoInfo(true)"
           (closeByBackdrop)="changeContratoInfo(true)" (close)="showModalInfoSaved1 = false"></app-alert>


<!-- modal de confirmación -->
<app-alert [showModal]="showModal" title="¿Está seguro de enviar?" subtitle="¿Está seguro de enviar?"
           [showSubtitle]="false" [message]="'Una vez enviado, no podrá cambiar la información.'" buttonText="Enviar"
           [showFirstButton]="true" cancelButtonText="Cancelar" [showCancelButton]="true" TypeAlert="success"
           (close)="showModal = false"
           (closeByButton1)="currentContractIteration == totalContracts ? sendAllContracts() : handleCloseByButton1()"
           (closeByIcon)="showModal = false" (closeByBackdrop)="showModal = false"
           (close)="showModal = false"></app-alert>


<!-- modal final -->
<app-alert [showModal]="showFinalModal" title="Envío exitoso" textColor="text-success" [showSubtitle]="false"
           [message]="'Su solicitud ha sido enviada exitosamente, se le asignará un radicado para su trámite'"
           buttonText="Continuar" [showFirstButton]="true" [showCancelButton]="false" TypeAlert="success"
           (close)="showFinalModal = false" (closeByButton1)="finalStep()" (closeByIcon)="showFinalModal = false"
           (closeByBackdrop)="showFinalModal = false" (close)="showFinalModal = false"></app-alert>

<!-- modal error -->
<app-alert [showModal]="showErrorModal" title="Error en el envió de datos" textColor="text-error" [showSubtitle]="false"
           [message]="'Estamos experimentando inconvenientes técnicos con el envió de la solicitud, por favor intente más tarde'"
           buttonText="Continuar" [showFirstButton]="true" [showCancelButton]="false" TypeAlert="error"
           (close)="showErrorModal = false" (closeByButton1)="showErrorModal = false"
           (closeByIcon)="showErrorModal = false"
           (closeByBackdrop)="showErrorModal = false" (close)="showErrorModal = false"></app-alert>

<!-- modal de error en data -->
<app-alert [showModal]="showModalAlerta" title="No se encuentra registro en RUES" subtitle=""
           message="Se recomienda solicitar realizar registro RUES, para poder tramitar solicitudes."
           cancelButtonText="Cerrar"
           [showCancelButton]="true" [showFirstButton]="false" (close)="showModalAlerta = false" textColor="text-waring"
           TypeAlert="warning"></app-alert>

<!-- modal de error en data -->
<app-alert [showModal]="showModalAlerta1" title="Registro con matricula cancelada" subtitle=""
           message="Se recomienda solicitar actualizar novedad de registro RUES, para poder tramitar solicitudes."
           cancelButtonText="Cerrar" [showCancelButton]="true" [showFirstButton]="false"
           (close)="showModalAlerta1 = false"
           textColor="text-waring" TypeAlert="warning"></app-alert>

<!-- modal de error en data -->
<app-alert [showModal]="showModalWarning1" title="inconvenientes registros RUES" subtitle=""
           message="Estamos experimentando inconvenientes técnicos con la consulta del NIT en rues. Se le habilitará el espacio para añadir de manera manual la razón social."
           cancelButtonText="Cerrar" [showCancelButton]="true" [showFirstButton]="false"
           (close)="showModalWarning1 = false"
           textColor="text-waring" TypeAlert="warning"></app-alert>
