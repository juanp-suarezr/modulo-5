import{a as ue}from"./chunk-IDE6T5FO.js";import{a as _e}from"./chunk-3NLEQZR2.js";import"./chunk-PX4S2S5H.js";import{a as ne}from"./chunk-6O7R62XF.js";import"./chunk-N5CKQDNL.js";import{l as oe,m as re}from"./chunk-UPPKU7C5.js";import{a as he,b as ve,c as Se,d as ge,h as ye}from"./chunk-HXTYPPYU.js";import{a as pe,b as me,c as fe}from"./chunk-VNNOFBKQ.js";import"./chunk-LBE34RXH.js";import{a as ae,e as le,i as se,t as de,v as ce}from"./chunk-4WBP37JA.js";import"./chunk-RV6LF5VC.js";import{c as Y,d as Z,f as ee,g as M,i as B,t as te,v as ie}from"./chunk-64Z3WTLD.js";import{Ab as q,Bb as Q,Cb as H,Eb as l,Gb as m,Hb as V,Ib as A,Jb as j,Kb as $,Lb as K,Ob as f,Pb as J,Ra as a,Sa as u,T as L,V as O,bb as z,ca as I,cc as E,da as R,eb as x,fb as b,gb as d,jc as F,k as P,kb as G,kc as X,la as v,lb as i,ma as S,mb as n,nb as c,rb as C,ub as w,va as U,vb as h,yb as W}from"./chunk-EHKYV6BG.js";var Fe=["input"],Me=(o,p,e)=>({"p-inputswitch p-component":!0,"p-inputswitch-checked":o,"p-disabled":p,"p-focus":e}),Be={provide:ae,useExisting:L(()=>N),multi:!0},N=(()=>{class o{cd;style;styleClass;tabindex;inputId;name;disabled;readonly;trueValue=!0;falseValue=!1;ariaLabel;ariaLabelledBy;autofocus;onChange=new U;input;modelValue=!1;focused=!1;onModelChange=()=>{};onModelTouched=()=>{};constructor(e){this.cd=e}onClick(e){!this.disabled&&!this.readonly&&(this.modelValue=this.checked()?this.falseValue:this.trueValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:e,checked:this.modelValue}),this.input.nativeElement.focus())}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}writeValue(e){this.modelValue=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}static \u0275fac=function(r){return new(r||o)(u(E))};static \u0275cmp=I({type:o,selectors:[["p-inputSwitch"]],viewQuery:function(r,t){if(r&1&&q(Fe,5),r&2){let s;Q(s=H())&&(t.input=s.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:[2,"tabindex","tabindex",X],inputId:"inputId",name:"name",disabled:[2,"disabled","disabled",F],readonly:[2,"readonly","readonly",F],trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",autofocus:[2,"autofocus","autofocus",F]},outputs:{onChange:"onChange"},features:[$([Be]),z],decls:5,vars:23,consts:[["input",""],[3,"click","ngClass","ngStyle"],[1,"p-hidden-accessible"],["type","checkbox","role","switch","pAutoFocus","",3,"focus","blur","checked","disabled","autofocus"],[1,"p-inputswitch-slider"]],template:function(r,t){if(r&1){let s=C();i(0,"div",1),w("click",function(y){return v(s),S(t.onClick(y))}),i(1,"div",2)(2,"input",3,0),w("focus",function(){return v(s),S(t.onFocus())})("blur",function(){return v(s),S(t.onBlur())}),n()(),c(4,"span",4),n()}r&2&&(G(t.styleClass),d("ngClass",J(19,Me,t.checked(),t.disabled,t.focused))("ngStyle",t.style),b("data-pc-name","inputswitch")("data-pc-section","root"),a(),b("data-pc-section","hiddenInputWrapper")("data-p-hidden-accessible",!0),a(),d("checked",t.checked())("disabled",t.disabled)("autofocus",t.autofocus),b("id",t.inputId)("aria-checked",t.checked())("aria-labelledby",t.ariaLabelledBy)("aria-label",t.ariaLabel)("name",t.name)("tabindex",t.tabindex)("data-pc-section","hiddenInput"),a(2),b("data-pc-section","slider"))},dependencies:[Z,M,oe],styles:[`@layer primeng{.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;inset:0;border:1px solid transparent}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}}
`],encapsulation:2,changeDetection:0})}return o})(),xe=(()=>{class o{static \u0275fac=function(r){return new(r||o)};static \u0275mod=R({type:o});static \u0275inj=O({imports:[B,re]})}return o})();var k=(o,p)=>({width:o,backgroundColor:p}),T=(o,p)=>({left:o,backgroundColor:p});function Te(o,p){o&1&&(i(0,"div",6)(1,"div",7),c(2,"p-progressSpinner",8),n()())}function Ve(o,p){if(o&1&&(i(0,"div",21)(1,"p",17),l(2," Sem\xE1foro de subsanaci\xF3n "),n(),i(3,"div",18)(4,"div",26),c(5,"div",27)(6,"div",28),i(7,"div",29),c(8,"div",30),n()()(),i(9,"div",31)(10,"span",32),c(11,"img",33),n(),i(12,"p",34),l(13," Se tienen 30 d\xEDas para subsanar la solicitud. "),n()()()),o&2){let e=h(3);a(6),d("ngStyle",f(2,k,(e.diferencias()>=30?100:e.diferencias()/30*100)+"%",e.getColorForSemaforo(e.diferencias(),30))),a(),d("ngStyle",f(5,T,"calc("+(e.diferencias()>=30?100:e.diferencias()/30*100)+"% - 7px)",e.getColorForSemaforo(e.diferencias(),30)))}}function Ae(o,p){if(o&1){let e=C();i(0,"div",14)(1,"div",15)(2,"div",16)(3,"p",17),l(4," Fecha solicitud "),n(),i(5,"div",18)(6,"div",19),l(7),n()()(),i(8,"div",16)(9,"p",17),l(10," Nombre de la empresa que realiza solicitud "),n(),i(11,"div",18)(12,"div",19),l(13),n()()(),i(14,"div",16)(15,"p",17),l(16," Territorial que emiti\xF3 la solicitud "),n(),i(17,"div",18)(18,"div",19),l(19),n()()()(),i(20,"div",20)(21,"div",21)(22,"p",17),l(23," Estado de solicitud "),n(),i(24,"div",22)(25,"p",23),l(26,"Activar"),n(),i(27,"p-inputSwitch",24),j("ngModelChange",function(t){v(e);let s=h(2);return A(s.checked,t)||(s.checked=t),S(t)}),n()()(),x(28,Ve,14,8,"div",25),i(29,"div",21)(30,"p",17),l(31," Categor\xEDa de solicitud "),n(),i(32,"div",18)(33,"div",19),l(34),n()()(),i(35,"div",21)(36,"p",17),l(37," Sem\xE1foro de alerta "),n(),i(38,"div",18)(39,"div",26),c(40,"div",27)(41,"div",28),i(42,"div",29),c(43,"div",30),n()()()()()()}if(o&2){let e=h(2);a(7),m(" ",e.formatField(e.solicitud==null?null:e.solicitud.fechaSolicitud)," "),a(6),m(" ",e.solicitud==null?null:e.solicitud.nombreEmpresa," "),a(6),m(" ",e.solicitud==null?null:e.solicitud.territorial," "),a(8),V("ngModel",e.checked),a(),d("ngIf",e.checked),a(6),m(" ",(e.solicitud==null?null:e.solicitud.categoriaSolicitudDescripcion)==="Fijaci\xF3n"?"Fijaci\xF3n de Capacidad Transportadora":(e.solicitud==null?null:e.solicitud.categoriaSolicitudDescripcion)==="Incremento"?"Incremento de Capacidad Transportadora":"Sin categor\xEDa"," "),a(7),d("ngStyle",f(8,k,(e.diferencias()>=10?100:e.diferencias()/10*100)+"%",e.getColorForSemaforo(e.diferencias(),10))),a(),d("ngStyle",f(11,T,"calc("+(e.diferencias()>=10?100:e.diferencias()/10*100)+"% - 7px)",e.getColorForSemaforo(e.diferencias(),10)))}}function je(o,p){if(o&1&&(i(0,"div",21)(1,"p",17),l(2," Sem\xE1foro de subsanaci\xF3n "),n(),i(3,"div",18)(4,"div",26),c(5,"div",27)(6,"div",28),i(7,"div",29),c(8,"div",30),n()()(),i(9,"div",31)(10,"span",32),c(11,"img",33),n(),i(12,"p",34),l(13," Se tienen 30 d\xEDas para subsanar la solicitud. "),n()()()),o&2){let e=h(3);a(6),d("ngStyle",f(2,k,(e.diferencias()>=30?100:e.diferencias()/30*100)+"%",e.getColorForSemaforo(e.diferencias(),30))),a(),d("ngStyle",f(5,T,"calc("+(e.diferencias()>=30?100:e.diferencias()/30*100)+"% - 7px)",e.getColorForSemaforo(e.diferencias(),30)))}}function Ne(o,p){if(o&1){let e=C();i(0,"div",14)(1,"div",15)(2,"div",16)(3,"p",17),l(4," Fecha solicitud "),n(),i(5,"div",18)(6,"div",19),l(7),n()()(),i(8,"div",16)(9,"p",17),l(10," Nombre de la empresa que realiza solicitud "),n(),i(11,"div",18)(12,"div",19),l(13),n()()(),i(14,"div",16)(15,"p",17),l(16," Territorial que emiti\xF3 la solicitud "),n(),i(17,"div",18)(18,"div",19),l(19),n()()()(),i(20,"div",20)(21,"div",21)(22,"p",17),l(23," Estado de solicitud "),n(),i(24,"div",22)(25,"p",23),l(26,"Activar"),n(),i(27,"p-inputSwitch",24),j("ngModelChange",function(t){v(e);let s=h(2);return A(s.checked,t)||(s.checked=t),S(t)}),n()()(),x(28,je,14,8,"div",25),i(29,"div",21)(30,"p",17),l(31," Categor\xEDa de solicitud "),n(),i(32,"div",18)(33,"div",19),l(34),n()()(),i(35,"div",21)(36,"p",17),l(37," Sem\xE1foro de alerta "),n(),i(38,"div",18)(39,"div",26),c(40,"div",27)(41,"div",28),i(42,"div",29),c(43,"div",30),n()()()()()()}if(o&2){let e=h(2);a(7),m(" ",e.formatField(e.solicitud==null?null:e.solicitud.fechaSolicitud)," "),a(6),m(" ",e.solicitud==null?null:e.solicitud.nombreEmpresa," "),a(6),m(" ",e.solicitud==null?null:e.solicitud.territorial," "),a(8),V("ngModel",e.checked),a(),d("ngIf",e.checked),a(6),m(" ",(e.solicitud==null?null:e.solicitud.categoriaSolicitudDescripcion)==="Fijaci\xF3n"?"Fijaci\xF3n de Capacidad Transportadora":(e.solicitud==null?null:e.solicitud.categoriaSolicitudDescripcion)==="Incremento"?"Incremento de Capacidad Transportadora":"Sin categor\xEDa"," "),a(7),d("ngStyle",f(8,k,(e.diferencias()>=10?100:e.diferencias()/10*100)+"%",e.getColorForSemaforo(e.diferencias(),10))),a(),d("ngStyle",f(11,T,"calc("+(e.diferencias()>=10?100:e.diferencias()/10*100)+"% - 7px)",e.getColorForSemaforo(e.diferencias(),10)))}}function De(o,p){if(o&1&&(i(0,"div",9)(1,"h3",10),l(2),n(),i(3,"div",11),c(4,"app-sttepper",12),n(),x(5,Ae,44,14,"div",13)(6,Ne,44,14,"div",13),n()),o&2){let e=h();a(2),m("Solicitud ID ",e.solicitud==null?null:e.solicitud.id,""),a(2),d("dataStep",e.infoStepper),a(),d("ngIf",e.activeStep==1),a(),d("ngIf",e.activeStep==2)}}var Ct=(()=>{class o{stateService;stepperService;authService;fb;errorService;apiSFService;router;route;cdr;constructor(e,r,t,s,g,y,be,Ce,we){this.stateService=e,this.stepperService=r,this.authService=t,this.fb=s,this.errorService=g,this.apiSFService=y,this.router=be,this.route=Ce,this.cdr=we,this.user=this.authService.currentUser;let _=this.router.getCurrentNavigation()?.extras.state;if(console.log(_),_&&_.id)console.log(_.id),this.setId(_.id);else{let D=localStorage.getItem("id");D&&this.setId(D)}}loadingPage=!0;idSubject=new P("0");id$=this.idSubject.asObservable();solicitud;activeNum="0";activeStep=1;checked=!1;formGroup1;formGroup2;formGroup3;formGroup4;errorStates={};user;showModal=!1;pdfUrl="https://www.orimi.com/pdf-test.pdf";fileName="archivo-prueba.pdf";fileSizeInKB=123.45;infoMenu=[{num:"0",name:"Solicitud"},{num:"1",name:"Operativo"},{num:"2",name:"Financiero"}];infoStepper=[{num:1,info:"Visualizar solicitud"},{num:2,info:"Visualizar documentos"},{num:3,info:"Visualizar informaci\xF3n"},{num:4,info:"Visualizar radicado"}];dataClass={textSize:"xs",textInfo:"Archivo PDF. Peso m\xE1ximo: 2MB"};ngOnInit(){this.stateService.activeNum$.subscribe(e=>{this.activeNum=e}),this.stepperService.activeStep$.subscribe(e=>{this.activeStep=e,console.log("Active step:",e)}),this.errorService.errorStates$.subscribe(e=>{this.errorStates=e}),this.id$.subscribe(e=>{localStorage.setItem("id",e),console.log("ID actualizado en localStorage:",e),this.loadOptions()}),this.cdr.detectChanges()}setId(e){this.idSubject.next(e)}updateId(e){this.setId(e)}loadOptions(){this.apiSFService.getSolicitudByID(this.idSubject.getValue()).subscribe(e=>{this.solicitud=e,console.log(e),this.loadingPage=!1},e=>{console.error("Error fetching user data",e)})}formatField(e){return this.isDateTime(e)?Y(e,"dd/MM/yyyy","en-US","UTC"):e}isDateTime(e){return typeof e=="string"&&!/^\d{4}-\d{2}-\d{2}|\d{2}\/\d{2}\/\d{4}$/.test(e)?!1:!isNaN(Date.parse(e))}diferencias(){if(this.solicitud){let e=new Date().valueOf(),r=new Date(this.solicitud.fechaSolicitud).valueOf(),t=e-r;return Math.floor(t/(1e3*60*60*24))}else return 0}getColorForSemaforo(e,r){let t=r==30?9:3,s=r==30?10:4,g=r==30?19:7,y=r==30?20:8;return e<=t?"#068460":e>=s&&e<=g?"#FFAB00":e>=y?"#A80521":"gray"}changeActiveNum(e){this.stateService.setActiveNum(e)}changeActiveStep(e){switch(e){case 1:break;case 2:this.formGroup1&&this.stepperService.setActiveNum(e);break;case 3:this.formGroup2&&(this.changeActiveNum("1"),this.stepperService.setActiveNum(e));break;case 4:this.formGroup3&&(this.changeActiveNum("2"),this.stepperService.setActiveNum(e));break;default:break}console.log(this.errorStates)}onFileSelected(e,r){let s={9:this.formGroup4}[r];s&&s.patchValue({[r]:e})}truncatedFileName(e,r=20){return e.length<=r?e:e.substring(0,r-3)+"..."}downloadPdf(){fetch(this.pdfUrl,{mode:"no-cors"}).then(e=>e.blob()).then(e=>{let r=document.createElement("a");r.href=window.URL.createObjectURL(e),r.download=this.fileName,r.click()}).catch(e=>console.error("Error al descargar el archivo:",e))}handleClose(){console.log("Modal closed")}handleCloseByButton2(){console.log("Modal closed by Button 2")}handleCloseByIcon(){console.log("Modal closed by Close Icon")}handleCloseByBackdrop(){console.log("Modal closed by clicking on Backdrop")}finalStep(){this.showModal=!1,this.router.navigate(["/dashboard"]).then(()=>{location.reload()})}static \u0275fac=function(r){return new(r||o)(u(he),u(Se),u(ne),u(de),u(ye),u(ue),u(ie),u(te),u(E))};static \u0275cmp=I({type:o,selectors:[["app-solicitud"]],standalone:!0,features:[K],decls:6,vars:9,consts:[["xmlns","http://www.w3.org/1999/html",1,"sm:grid","sm:grid-cols-10","gap-4"],[1,"md:col-span-2","sm:col-span-3","w-auto","sm:mt-16","mt-12"],[3,"data","active"],["class","md:col-span-8 sm:col-span-7 w-auto h-full sm:mt-10 mt-4 md:px-8 px-2",4,"ngIf"],["class","md:col-span-8 sm:col-span-7 w-auto sm:mt-10 mt-4 md:px-8 px-2",4,"ngIf"],["title","Asignaci\xF3n exitosa","textColor","text-success","buttonText","Continuar","TypeAlert","success",3,"close","closeByButton1","closeByButton2","closeByIcon","closeByBackdrop","showModal","showSubtitle","message","showFirstButton","showCancelButton"],[1,"md:col-span-8","sm:col-span-7","w-auto","h-full","sm:mt-10","mt-4","md:px-8","px-2"],[1,"card","flex","justify-center","items-center","mt-8"],["styleClass","w-6rem h-6rem","strokeWidth","4","fill","var(--surface-ground)"],[1,"md:col-span-8","sm:col-span-7","w-auto","sm:mt-10","mt-4","md:px-8","px-2"],[1,"text-primary1","!font-bold"],[1,"mt-4","w-full","inline-flex","justify-center"],[3,"dataStep"],["class","px-4 md:pl-16 md:pe-16 mt-6 active1 mb-6",4,"ngIf"],[1,"px-4","md:pl-16","md:pe-16","mt-6","active1","mb-6"],[1,"content1","md:grid","sm:grid-cols-2","md:grid-cols-3","md:gap-x-24","md:flex","items-start","h-full"],[1,"w-full","flex","flex-col","justify-start","items-stretch","pt-6","my-auto","h-full"],[1,"text-primary3","font-semibold","h-full","m-auto"],[1,"mt-2","relative","w-full","h-full","flex","items-center"],[1,"shadow-sm","rounded-md","min-w-[160px]","w-full","p-[10px]","h-[40px]","border","focus:outline-none","focus:border-primary1","bg-secondary3","border-secondary2","text-primary3","flex","items-center","justify-center"],[1,"content2","md:grid","sm:grid-cols-2","md:grid-cols-3","md:gap-x-24","md:flex","items-start","h-full","mt-6"],[1,"w-full","flex","flex-col","justify-start","items-stretch","pt-6","my-auto","h-full","mb-6"],[1,"mt-2","relative","w-full","h-full","flex","justify-center","items-center"],[1,"my-auto","me-2","flex","intems-center","font-bold","text-primary1","sm:text-base"],[1,"my-auto","h-auto","flex","items-center",3,"ngModelChange","ngModel"],["class","w-full flex flex-col justify-start items-stretch pt-6 my-auto h-full mb-6",4,"ngIf"],[1,"w-full","relative","flex-col","whitespace-no-wrap","z-[1]"],[1,"absolute","top-0","left-0","h-[3px]","bg-secondary2","w-full"],[1,"absolute","top-0","left-0","h-[3px]",3,"ngStyle"],[1,"absolute","top-[-5px]","h-[14px]","w-[14px]","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[1,"h-[8px]","w-[8px]","rounded-full","bg-white"],[1,"flex","inline-flex","md:gap-3","gap-2","h-full","w-full","mt-2"],[1,"lg:w-[12%]","sm:w-[12%]","w-[10%]","h-full","flex","justify-center","lg:px-1","m-auto"],["src","assets/iconoInfo.svg",1,"w-full","m-auto"],[1,"text-primary1","work-sans","text-[11px]","mt-2","w-auto"]],template:function(r,t){r&1&&(i(0,"div",0)(1,"div",1),c(2,"app-left-nav",2),n(),x(3,Te,3,0,"div",3)(4,De,7,4,"div",4),n(),i(5,"app-alert",5),w("close",function(){return t.handleClose()})("closeByButton1",function(){return t.finalStep()})("closeByButton2",function(){return t.handleCloseByButton2()})("closeByIcon",function(){return t.handleCloseByIcon()})("closeByBackdrop",function(){return t.handleCloseByBackdrop()})("close",function(){return t.showModal=!1}),n()),r&2&&(a(2),W("active",t.activeNum),d("data",t.infoMenu),a(),d("ngIf",t.loadingPage),a(),d("ngIf",t.activeNum=="0"&&t.loadingPage==!1),a(),d("showModal",t.showModal)("showSubtitle",!1)("message","Se ha asignado un radicado a esta solicitud")("showFirstButton",!0)("showCancelButton",!1))},dependencies:[ve,ee,_e,le,se,ge,ce,fe,xe,N,B,M,me,pe]})}return o})();export{Ct as default};
