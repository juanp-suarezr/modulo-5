import{a as O}from"./chunk-M7BISIOF.js";import{a as U}from"./chunk-IDE6T5FO.js";import{c as k}from"./chunk-VNNOFBKQ.js";import{a as V}from"./chunk-LBE34RXH.js";import{b as A,c as S,e as j,f as q,j as z,l as P,o as D,s as R,t as W,v as L}from"./chunk-4WBP37JA.js";import"./chunk-RV6LF5VC.js";import{f as F,i as G,v as I}from"./chunk-64Z3WTLD.js";import{B as y,Eb as p,F as x,Lb as N,N as B,Ra as r,Sa as c,ca as M,cc as T,eb as f,gb as n,lb as t,mb as o,n as E,nb as m,ub as d,z as C}from"./chunk-EHKYV6BG.js";function J(a,u){a&1&&(t(0,"span",27),m(1,"span",28),o())}function H(a,u){a&1&&(t(0,"span",27),m(1,"span",29),o())}function K(a,u){a&1&&(t(0,"span",30),p(1," Nombre de empresa es obligatorio "),o())}function Q(a,u){a&1&&(t(0,"span",27),m(1,"span",28),o())}function X(a,u){a&1&&(t(0,"span",27),m(1,"span",29),o())}function Y(a,u){a&1&&(t(0,"span",30),p(1," NIT de empresa es obligatorio "),o())}var me=(()=>{class a{fb;cdr;apiSFService;router;constructor(i,l,e,s){this.fb=i,this.cdr=l,this.apiSFService=e,this.router=s}submitted=!1;formGroup1;showModal=!1;ShowLoadingModal=!1;showModalWarning=!1;showModalWarning1=!1;showModalAlerta=!1;showModalAlerta1=!1;isProcessing=!0;ngOnInit(){this.initializeForm()}initializeForm(){this.formGroup1=this.fb.group({nombreEmpresa:["",{value:"",disabled:!0},S.required],nit:["901852316",[S.required,O]]})}ngAfterViewInit(){this.formGroup1.get("nombreEmpresa")?.disable(),this.formGroup1.get("nit")?.valueChanges.pipe(y(500),x(),B(i=>(this.isProcessing=!0,this.formGroup1.get("nombreEmpresa")?.setValue(""),i&&i.length>=9?this.apiSFService.getDataByNIT(i).pipe(C(l=>(console.error("Error al enviar los datos:",l),this.showModalWarning1=!0,this.formGroup1.get("nombreEmpresa")?.enable(),E(null)))):(this.isProcessing=!0,E(null))))).subscribe(i=>{if(i){let l=JSON.parse(i);console.log(l),l.registros?l.registros[0].nomEstadoMatricula==="ACTIVA"?(console.log("Empresa activa"),this.isProcessing=!1,this.formGroup1.get("nombreEmpresa")?.setValue(l.registros[0].razonSocialEmpresa),console.log("Datos enviados exitosamente:",l.registros[0].razonSocialEmpresa)):(this.showModalAlerta1=!0,console.log("Empresa inactiva")):this.showModalAlerta=!0}})}validator(){this.formGroup1.valid?(this.isProcessing=!0,this.ShowLoadingModal=!0,this.apiSFService.getSolicitudByNIT(this.formGroup1.get("nit")?.value).subscribe(i=>{console.log(i.registrado),this.isProcessing=!1,this.ShowLoadingModal=!1,i.registrado?this.showModal=!0:this.router.navigate(["/fijacioncapacidadtransportadora"],{state:{nit:this.formGroup1.get("nit")?.value,nombreEmpresa:this.formGroup1.get("nombreEmpresa")?.value}})},i=>{console.error("Error fetching user data",i),this.isProcessing=!1,this.ShowLoadingModal=!1,this.showModalWarning=!0})):(this.submitted=!0,this.formGroup1.markAllAsTouched())}handleCloseByButton2(){this.router.navigate(["/dashboard"]).then(()=>{})}static \u0275fac=function(l){return new(l||a)(c(W),c(T),c(U),c(I))};static \u0275cmp=M({type:a,selectors:[["app-validacion-nit"]],standalone:!0,features:[N],decls:42,vars:28,consts:[[1,"w-full","px-6","sm:px-24","md:px-36","mt-12","mb-12","h-full"],[1,"text-primary1","!font-bold","mt-4"],[1,"px-4","md:pl-16","md:pe-16","mt-6","active1","mb-6",3,"ngSubmit","formGroup"],[1,"col-span-2"],[1,"font-bold"],[1,"text-primary4","font-[500]"],[1,"content1","md:grid","sm:grid-cols-2","md:gap-x-36","md:flex","items-start","h-full"],[1,"w-full","flex","flex-col","justify-center","pt-6"],[1,"text-primary3","font-semibold"],[1,"mt-2","relative","w-full"],["type","text","formControlName","nombreEmpresa","required","","placeholder","Nombre empresa",1,"shadow-sm","rounded-md","min-w-[160px]","w-full","p-[10px]","h-[40px]","border","border-primary3","focus:outline-none","focus:border-primary1","bg-transparent","disabled:bg-secondary3","disabled:border-secondary2","disabled:text-secondary2","disabled:font-bold"],[1,"w-full","relative"],["class","absolute top-[-33px] right-0 flex items-center pr-[10px]",4,"ngIf"],["class","text-error",4,"ngIf"],["type","text","formControlName","nit","required","","placeholder","Ingrese NIT",1,"shadow-sm","rounded-md","min-w-[160px]","w-full","p-[10px]","h-[40px]","border","border-primary3","focus:outline-none","focus:border-primary1","bg-transparent"],[1,"flex","inline-flex","md:gap-3","gap-2","h-full","w-full","mt-2"],[1,"lg:w-[12%]","sm:w-[12%]","w-[10%]","h-full","flex","justify-center","lg:px-1","m-auto"],["src","assets/iconoInfo.svg",1,"w-full","m-auto"],[1,"text-primary1","work-sans","text-[11px]","mt-2","w-auto"],[1,"mt-6","w-full","flex","justify-end"],["type","submit",1,"",3,"disabled"],["title","No se encuentra registro en RUES","subtitle","","message","Se recomienda solicitar realizar registro RUES, para poder tramitar solicitudes.","cancelButtonText","Cerrar","textColor","text-waring","TypeAlert","warning",3,"close","showModal","showCancelButton","showFirstButton"],["title","Registro con matricula cancelada","subtitle","","message","Se recomienda solicitar actualizar novedad de registro RUES, para poder tramitar solicitudes.","cancelButtonText","Cerrar","textColor","text-waring","TypeAlert","warning",3,"close","showModal","showCancelButton","showFirstButton"],["title","inconvenientes registros RUES","subtitle","","message","Estamos experimentando inconvenientes t\xE9cnicos con la consulta del NIT en rues. Se le habilitar\xE1 el espacio para a\xF1adir de manera manual la raz\xF3n social.","cancelButtonText","Cerrar","textColor","text-waring","TypeAlert","warning",3,"close","showModal","showCancelButton","showFirstButton"],["title","Error en la fijaci\xF3n de la capacidad transportadora","cancelButtonText","Cerrar","TypeAlert","error","textColor","text-error",3,"close","closeByButton2","showModal","showSubtitle","message","showCancelButton","showFirstButton"],["title","Verificando datos","subtitle","Un momento por favor.","message","Se est\xE1 realizando la consulta del nit","TypeAlert","loader",3,"showModal","showFirstButton","showCancelButton"],["title","No verificado","subtitle","","message","Estamos experimentando inconvenientes t\xE9cnicos con la validaci\xF3n del nit. Por favor, vuelva a intentarlo m\xE1s tarde.","cancelButtonText","Cerrar","textColor","text-waring","TypeAlert","warning",3,"close","showModal","showCancelButton","showFirstButton"],[1,"absolute","top-[-33px]","right-0","flex","items-center","pr-[10px]"],[1,"pi","pi-exclamation-circle","text-error","text-[24px]"],[1,"pi","pi-check-circle","text-success","text-[24px]"],[1,"text-error"]],template:function(l,e){if(l&1&&(t(0,"div",0)(1,"h3",1),p(2,"Fijaci\xF3n de Capacidad Transportadora"),o(),t(3,"form",2),d("ngSubmit",function(){return e.validator()}),t(4,"div",3)(5,"p",4),p(6,"Digitar los siguientes campos*"),o(),t(7,"p",5),p(8,"Los campos marcados con * son obligatorios"),o()(),t(9,"div",6)(10,"div",7)(11,"p",8),p(12," Nombre de empresa que realiza la solicitud* "),o(),t(13,"div",9),m(14,"input",10),t(15,"div",11),f(16,J,2,0,"span",12)(17,H,2,0,"span",12),o(),f(18,K,2,0,"span",13),o()(),t(19,"div",7)(20,"p",8),p(21," NIT de empresa que realiza la solicitud* "),o(),t(22,"div",9),m(23,"input",14),t(24,"div",11),f(25,Q,2,0,"span",12)(26,X,2,0,"span",12),o(),f(27,Y,2,0,"span",13),o(),t(28,"div",15)(29,"span",16),m(30,"img",17),o(),t(31,"p",18),p(32," El NIT es necesario para verificar si ya existe una capacidad transportadora asignada a la empresa. En caso de que exista, no ser\xE1 posible asignar una nueva capacidad relacionada con la empresa. "),o()()()(),t(33,"div",19)(34,"app-primary-button",20),p(35,"continuar"),o()()(),t(36,"app-alert",21),d("close",function(){return e.showModalAlerta=!1}),o(),t(37,"app-alert",22),d("close",function(){return e.showModalAlerta1=!1}),o(),t(38,"app-alert",23),d("close",function(){return e.showModalWarning1=!1}),o(),t(39,"app-alert",24),d("close",function(){return e.showModal=!1})("closeByButton2",function(){return e.handleCloseByButton2()}),o(),m(40,"app-alert",25),t(41,"app-alert",26),d("close",function(){return e.showModalWarning=!1}),o()()),l&2){let s,h,v,g,w,_,b;r(3),n("formGroup",e.formGroup1),r(13),n("ngIf",((s=e.formGroup1.get("nombreEmpresa"))==null?null:s.invalid)&&(((s=e.formGroup1.get("nombreEmpresa"))==null?null:s.touched)||e.submitted)),r(),n("ngIf",((h=e.formGroup1.get("nombreEmpresa"))==null?null:h.valid)&&(((h=e.formGroup1.get("nombreEmpresa"))==null?null:h.touched)||e.submitted)),r(),n("ngIf",e.submitted&&((v=e.formGroup1.get("nombreEmpresa"))==null||v.errors==null?null:v.errors.required)),r(7),n("ngIf",((g=e.formGroup1.get("nit"))==null?null:g.invalid)&&(((g=e.formGroup1.get("nit"))==null?null:g.touched)||e.submitted)),r(),n("ngIf",((w=e.formGroup1.get("nit"))==null?null:w.valid)&&(((w=e.formGroup1.get("nit"))==null?null:w.touched)||e.submitted)),r(),n("ngIf",e.submitted&&((_=e.formGroup1.get("nit"))==null||_.errors==null?null:_.errors.required)),r(7),n("disabled",e.isProcessing),r(2),n("showModal",e.showModalAlerta)("showCancelButton",!0)("showFirstButton",!1),r(),n("showModal",e.showModalAlerta1)("showCancelButton",!0)("showFirstButton",!1),r(),n("showModal",e.showModalWarning1)("showCancelButton",!0)("showFirstButton",!1),r(),n("showModal",e.showModal)("showSubtitle",!1)("message","la empresa "+((b=e.formGroup1.get("nombreEmpresa"))==null?null:b.value)+", con NIT"+((b=e.formGroup1.get("nit"))==null?null:b.value)+", ya tiene una fijaci\xF3n de la capacidad transportadora asignada")("showCancelButton",!0)("showFirstButton",!1),r(),n("showModal",e.ShowLoadingModal)("showFirstButton",!1)("showCancelButton",!1),r(),n("showModal",e.showModalWarning)("showCancelButton",!0)("showFirstButton",!1)}},dependencies:[V,G,F,L,z,A,j,q,R,P,D,k]})}return a})();export{me as default};
