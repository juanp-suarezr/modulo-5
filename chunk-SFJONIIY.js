import{a as Ce}from"./chunk-DMTQJBPA.js";import{a as be}from"./chunk-IDE6T5FO.js";import{a as se,b as ce,c as le}from"./chunk-PX4S2S5H.js";import{a as V}from"./chunk-6O7R62XF.js";import{h as B,n as oe,q as ae,s as re}from"./chunk-UPPKU7C5.js";import{a as de}from"./chunk-LBE34RXH.js";import{b as pe,e as ge,i as me,p as ue,q as fe,r as he,s as _e,u as ve}from"./chunk-4WBP37JA.js";import"./chunk-RV6LF5VC.js";import{c as ie,d as H,e as k,f as D,g as j,i as y,v as ne}from"./chunk-64Z3WTLD.js";import{Eb as p,Fb as Q,Gb as _,H as Z,Hb as A,Ib as N,Jb as z,Lb as P,Mb as G,Na as I,Nb as W,Ob as L,Ra as a,Sa as x,V as O,_b as te,a as $,ab as ee,b as J,ca as b,cc as K,da as w,eb as m,fb as M,gb as c,kb as E,la as v,lb as o,ma as C,mb as s,na as X,nb as f,pa as Y,rb as S,ub as h,va as R,vb as r}from"./chunk-EHKYV6BG.js";var ye=(()=>{class t extends oe{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Y(t)))(i||t)}})();static \u0275cmp=b({type:t,selectors:[["ChevronRightIcon"]],standalone:!0,features:[ee,P],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z","fill","currentColor"]],template:function(n,i){n&1&&(X(),o(0,"svg",0),f(1,"path",1),s()),n&2&&(E(i.getClassNames()),M("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})}return t})();var xe=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=w({type:t});static \u0275inj=O({imports:[y,ye,se,B]})}return t})();var Se=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=w({type:t});static \u0275inj=O({imports:[y,B]})}return t})();var Le=t=>({"active-govco":t});function He(t,l){if(t&1){let e=S();o(0,"li",7)(1,"a",8),h("click",function(){v(e);let i=r();return C(i.changePage(i.currentPage-1))}),f(2,"span",9),o(3,"span",10),p(4,"Anterior"),s()()()}}function je(t,l){if(t&1){let e=S();o(0,"li",11)(1,"a",8),h("click",function(){let i=v(e).$implicit,d=r();return C(d.changePage(i))}),p(2),s()()}if(t&2){let e=l.$implicit,n=r();c("ngClass",W(2,Le,e===n.currentPage)),a(2),_(" ",e," ")}}function Ve(t,l){if(t&1){let e=S();o(0,"li",12)(1,"a",8),h("click",function(){v(e);let i=r();return C(i.changePage(i.currentPage+1))}),f(2,"span",13),o(3,"span",14),p(4,"Siguiente"),s()()()}}var Pe=(()=>{class t{totalPages=10;initialPage=1;pageChange=new R;currentPage=1;pagesToDisplay=[];ngOnInit(){this.currentPage=this.initialPage,this.generatePagesToDisplay()}generatePagesToDisplay(){let e=this.currentPage>2?this.currentPage-1:1,n=this.currentPage<this.totalPages-1?this.currentPage+1:this.totalPages;if(this.pagesToDisplay=[],this.totalPages<=5)for(let i=1;i<=this.totalPages;i++)this.pagesToDisplay.push(i);else{this.currentPage>2&&(this.pagesToDisplay.push(1),this.currentPage>3&&this.pagesToDisplay.push(-1));for(let i=e;i<=n;i++)this.pagesToDisplay.push(i);this.currentPage<this.totalPages-1&&(this.currentPage<this.totalPages-2&&this.pagesToDisplay.push(-1),this.pagesToDisplay.push(this.totalPages))}}changePage(e){e===-1||e===this.currentPage||(this.currentPage=e,this.generatePagesToDisplay(),this.pageChange.emit(this.currentPage))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["app-paginador"]],inputs:{totalPages:"totalPages",initialPage:"initialPage"},outputs:{pageChange:"pageChange"},standalone:!0,features:[P],decls:7,vars:3,consts:[[1,"pagination-container-govco"],["aria-label","Paginador de ejemplo",1,"nav-pagination-govco"],["id","paginationExample",1,"pagination-govco"],["id","lista-paginador"],["class","page-item-govco prev-page-govco no",4,"ngIf"],["class","page-item-govco number-govco",3,"ngClass",4,"ngFor","ngForOf"],["class","page-item-govco next-page-govco no",4,"ngIf"],[1,"page-item-govco","prev-page-govco","no"],["href","javascript:void(0)",3,"click"],[1,"prev-page-icon-govco"],[1,"prev-page-text-govco"],[1,"page-item-govco","number-govco",3,"ngClass"],[1,"page-item-govco","next-page-govco","no"],[1,"next-page-icon-govco"],[1,"next-page-text-govco"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"nav",1)(2,"div",2)(3,"ul",3),m(4,He,5,0,"li",4)(5,je,3,4,"li",5)(6,Ve,5,0,"li",6),s()()()()),n&2&&(a(4),c("ngIf",i.currentPage>1),a(),c("ngForOf",i.pagesToDisplay),a(),c("ngIf",i.currentPage<i.totalPages))},dependencies:[y,H,k,D],styles:['@font-face{font-family:govco-font;src:url("./media/govco-font-icons-PTDI6OXG.ttf") format("truetype");font-weight:400;font-style:normal}@font-face{font-family:WorkSans-Regular;src:url("./media/WorkSans-Regular-5DMVDJDO.ttf")}@font-face{font-family:WorkSans-Medium;src:url("./media/WorkSans-Medium-INZ54GYZ.ttf")}@font-face{font-family:Montserrat-SemiBold;src:url("./media/Montserrat-SemiBold-HG6HWEJR.ttf")}@font-face{font-family:Montserrat-Medium;src:url("./media/Montserrat-Medium-KC5CMJH7.ttf")}.pagination-container-govco[_ngcontent-%COMP%]{margin:8px;line-height:normal!important;box-sizing:content-box!important}.nav-pagination-govco[_ngcontent-%COMP%]{color:transparent!important;background:transparent!important;box-shadow:none!important;display:flex;height:auto!important;box-sizing:content-box!important}.pagination-govco[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{background:#fff;display:flex;padding-left:0}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;line-height:2.5rem;text-align:center;font-weight:500;cursor:pointer;transition:all .2s ease;font-family:WorkSans-Regular;font-size:14px}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:0}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.page-item-govco[_ngcontent-%COMP%]{margin:0 .5rem}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.number-govco[_ngcontent-%COMP%], .pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.dots-govco[_ngcontent-%COMP%]{margin:0 0rem}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.number-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.dots-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-family:WorkSans-Medium;font-size:16px;color:#0b457f;display:block;height:2.5rem;width:2.5rem}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.page-item-govco.prev-page-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .next-page-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#36c;text-decoration:underline}.prev-page-icon-govco[_ngcontent-%COMP%], .next-page-icon-govco[_ngcontent-%COMP%]{display:none;height:16px}.prev-page-icon-govco[_ngcontent-%COMP%]:before, .next-page-icon-govco[_ngcontent-%COMP%]:before{font-family:govco-font;font-size:16px}.prev-page-icon-govco[_ngcontent-%COMP%]:before{content:"\\e811"}.next-page-icon-govco[_ngcontent-%COMP%]:before{content:"\\e812"}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.page-item-govco.prev-page-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited, .next-page-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#36c}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.page-item-govco.disabled-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{pointer-events:none;color:#bababa!important;opacity:1}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.dots-govco[_ngcontent-%COMP%]{cursor:default}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active-govco[_ngcontent-%COMP%]{background:#36c;border-radius:4px}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.number-govco[_ngcontent-%COMP%]:not(.active-govco)   a[_ngcontent-%COMP%]:hover, .pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.number-govco[_ngcontent-%COMP%]:not(.active-govco)   a.hover[_ngcontent-%COMP%]{background:#e6effd;border-radius:4px}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.dots-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.prev-page-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.next-page-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:transparent}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.prev-page-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.next-page-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.prev-page-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.next-page-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#004884}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.dots-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0b457f;cursor:default}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.number-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.number-govco[_ngcontent-%COMP%]   a.focus[_ngcontent-%COMP%]{outline:none;border:1px solid black}.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.number-govco[_ngcontent-%COMP%]:not(.active-govco)   a[_ngcontent-%COMP%]:focus, .pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.number-govco[_ngcontent-%COMP%]:not(.active-govco)   a.focus[_ngcontent-%COMP%]{background:#e6effd}@media (max-width: 575px){.pagination-govco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.page-item-govco.prev-page-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .next-page-govco[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important}.prev-page-icon-govco[_ngcontent-%COMP%], .next-page-icon-govco[_ngcontent-%COMP%]{display:inline}.prev-page-text-govco[_ngcontent-%COMP%], .next-page-text-govco[_ngcontent-%COMP%]{display:none}}']})}return t})();var Te=(t,l)=>({width:t,backgroundColor:l}),Me=(t,l)=>({left:t,backgroundColor:l});function Ue(t,l){if(t&1&&(o(0,"th",13),f(1,"span",14),s()),t&2){let e=l.$implicit;a(),c("innerHTML",e.titulo,I)}}function $e(t,l){if(t&1&&(o(0,"p",23),p(1),s()),t&2){let e=r().$implicit,n=r().$implicit,i=r(2);a(),_(" ",i.formatField(n[e])," ")}}function Qe(t,l){if(t&1){let e=S();o(0,"button",24),h("click",function(){v(e);let i=r(2).$implicit,d=r(2);return C(d.onButtonClick(i))}),p(1," Continuar "),s()}}function Ge(t,l){if(t&1&&(o(0,"p",23),p(1),s()),t&2){let e=r().$implicit,n=r().$implicit;a(),_(" ",n[e]," ")}}function We(t,l){if(t&1){let e=S();o(0,"button",25),h("click",function(){v(e);let i=r().$implicit,d=r().$implicit,g=r(2);return C(g.onIdClick(d[i]))}),p(1),s()}if(t&2){let e=r().$implicit,n=r().$implicit;a(),_(" ",n[e]," ")}}function Ke(t,l){if(t&1&&(o(0,"p",23),p(1),s()),t&2){let e=r().$implicit,n=r().$implicit,i=r(2);a(),_(" ",i.formatField(n[e])," ")}}function qe(t,l){if(t&1&&(o(0,"div",26),f(1,"div",27)(2,"div",28),o(3,"div",29),f(4,"div",30),s()()),t&2){let e=r().$implicit,n=r().$implicit,i=r(2);a(2),c("ngStyle",L(2,Te,(n[e]>=10?100:n[e]/10*100)+"%",i.getColorForSemaforo(n[e]))),a(),c("ngStyle",L(5,Me,"calc("+(n[e]>=10?100:n[e]/10*100)+"% - 7px)",i.getColorForSemaforo(n[e])))}}function Je(t,l){if(t&1&&(o(0,"td",18),m(1,$e,2,1,"p",19)(2,Qe,2,0,"button",20)(3,Ge,2,1,"p",19)(4,We,2,1,"button",21)(5,Ke,2,1,"p",19)(6,qe,5,8,"div",22),s()),t&2){let e=l.$implicit,n=r().$implicit,i=r(2);a(),c("ngIf",e!=="id"&&e!=="estadoSolicitudDescripcion"&&i.hasRole("ROLE_ESCRITURA_MIN")),a(),c("ngIf",e=="estadoSolicitudDescripcion"&&n[e]=="Pendiente"&&i.hasRole("ROLE_ESCRITURA_MIN")),a(),c("ngIf",e==="id"&&i.hasRole("ROLE_ESCRITURA_MIN")),a(),c("ngIf",e==="id"&&(i.hasRole("ROLE_ESCRITURA_GESDOC")||i.hasRole("ROLE_SUPERTRANSPORTE"))),a(),c("ngIf",e!=="id"&&e!=="semaforo"&&(i.hasRole("ROLE_ESCRITURA_GESDOC")||i.hasRole("ROLE_SUPERTRANSPORTE"))),a(),c("ngIf",e==="semaforo"&&(i.hasRole("ROLE_ESCRITURA_GESDOC")||i.hasRole("ROLE_SUPERTRANSPORTE")))}}function Ze(t,l){if(t&1&&(o(0,"tr",16),m(1,Je,7,6,"td",17),s()),t&2){let e=r(2);a(),c("ngForOf",e.info)}}function Xe(t,l){if(t&1&&(o(0,"tbody"),m(1,Ze,2,1,"tr",15),s()),t&2){let e=r();a(),c("ngForOf",e.data)}}function Ye(t,l){if(t&1&&(o(0,"tbody")(1,"tr")(2,"td",31)(3,"p",32),p(4," No hay ning\xFAn registro con los criterios de b\xFAsqueda o filtros seleccionados "),s()()()()),t&2){let e=r();a(2),M("colspan",e.headers.length)}}function et(t,l){if(t&1&&(o(0,"p",23),p(1),s()),t&2){let e=r().index,n=r().$implicit,i=r(2);a(),_(" ",i.formatField(n[i.info[e]])," ")}}function tt(t,l){if(t&1){let e=S();o(0,"button",44),h("click",function(){v(e);let i=r(2).$implicit,d=r(2);return C(d.onButtonClick(i))}),p(1," Continuar "),s()}}function it(t,l){if(t&1&&(o(0,"p",23),p(1),s()),t&2){let e=r().index,n=r().$implicit,i=r(2);a(),_(" ",n[i.info[e]]," ")}}function nt(t,l){if(t&1){let e=S();o(0,"button",25),h("click",function(){v(e);let i=r().index,d=r().$implicit,g=r(2);return C(g.onIdClick(d[g.info[i]]))}),p(1),s()}if(t&2){let e=r().index,n=r().$implicit,i=r(2);a(),_(" ",n[i.info[e]]," ")}}function ot(t,l){if(t&1&&(o(0,"p",23),p(1),s()),t&2){let e=r().index,n=r().$implicit,i=r(2);a(),_(" ",i.formatField(n[i.info[e]])," ")}}function at(t,l){if(t&1&&(o(0,"div",45),f(1,"div",27)(2,"div",28),o(3,"div",29),f(4,"div",30),s()()),t&2){let e=r().index,n=r().$implicit,i=r(2);a(2),c("ngStyle",L(2,Te,(n[i.info[e]]>=10?100:n[i.info[e]]/10*100)+"%",i.getColorForSemaforo(n[i.info[e]]))),a(),c("ngStyle",L(5,Me,"calc("+(n[i.info[e]]>=10?100:n[i.info[e]]/10*100)+"% - 7px)",i.getColorForSemaforo(n[i.info[e]])))}}function rt(t,l){if(t&1&&(o(0,"div",39),f(1,"div",40),o(2,"div",41),m(3,et,2,1,"p",19)(4,tt,2,0,"button",42)(5,it,2,1,"p",19)(6,nt,2,1,"button",21)(7,ot,2,1,"p",19)(8,at,5,8,"div",43),s()()),t&2){let e=l.$implicit,n=l.index,i=r().$implicit,d=r(2);a(),c("innerHTML",e.titulo,I),a(2),c("ngIf",d.info[n]!=="id"&&d.info[n]!=="estadoSolicitudDescripcion"&&d.hasRole("ROLE_ESCRITURA_MIN")),a(),c("ngIf",d.info[n]=="estadoSolicitudDescripcion"&&i[d.info[n]]=="Pendiente"&&d.hasRole("ROLE_ESCRITURA_MIN")),a(),c("ngIf",d.info[n]==="id"&&d.hasRole("ROLE_ESCRITURA_MIN")),a(),c("ngIf",d.info[n]==="id"&&(d.hasRole("ROLE_ESCRITURA_GESDOC")||d.hasRole("ROLE_SUPERTRANSPORTE"))),a(),c("ngIf",d.info[n]!=="id"&&d.info[n]!=="semaforo"&&(d.hasRole("ROLE_ESCRITURA_GESDOC")||d.hasRole("ROLE_SUPERTRANSPORTE"))),a(),c("ngIf",d.info[n]==="semaforo"&&(d.hasRole("ROLE_ESCRITURA_GESDOC")||d.hasRole("ROLE_SUPERTRANSPORTE")))}}function st(t,l){if(t&1&&(o(0,"div",35)(1,"div",36)(2,"div",37),m(3,rt,9,7,"div",38),s()()()),t&2){let e=r(2);a(3),c("ngForOf",e.headers)}}function ct(t,l){if(t&1&&(o(0,"div",33),m(1,st,4,1,"div",34),s()),t&2){let e=r();a(),c("ngForOf",e.data)}}function lt(t,l){t&1&&(o(0,"div",33)(1,"p",46),p(2," No hay ning\xFAn registro con los criterios de b\xFAsqueda o filtros seleccionados "),s()())}var Oe=(()=>{class t{authService;headers=[];data=[];idClicked=new R;solicitudGuardada=new R;user;constructor(e){this.authService=e,this.user=this.authService.currentUser}get info(){return this.data.length>0?Object.keys(this.data[0]):[]}formatField(e){return this.isDateTime(e)?ie(e,"dd/MM/yyyy","en-US","UTC"):e}isDateTime(e){return typeof e=="string"&&!/^\d{4}-\d{2}-\d{2}|\d{2}\/\d{2}\/\d{4}$/.test(e)?!1:!isNaN(Date.parse(e))}hasRole(e){return this.user.roles.some(n=>n.roleName.includes(e))}onIdClick(e){console.log(e),this.idClicked.emit(e)}onButtonClick(e){console.log(e),this.solicitudGuardada.emit({id:e.id,categoria:e.categoria})}getColorForSemaforo(e){return e<=3?"#068460":e>=4&&e<=7?"#FFAB00":e>=8?"#A80521":"gray"}static \u0275fac=function(n){return new(n||t)(x(V))};static \u0275cmp=b({type:t,selectors:[["app-table"]],inputs:{headers:"headers",data:"data"},outputs:{idClicked:"idClicked",solicitudGuardada:"solicitudGuardada"},standalone:!0,features:[P],decls:15,vars:5,consts:[[1,"mt-6","w-full","mb-6","hidden","sm:block"],[1,"flex","flex-col"],[1,"inline-block","shadow"],[1,"min-w-full","py-2"],[1,"overflow-x-auto"],[1,"h-full"],[1,"w-full","overflow-auto","border-2","border-secondary1"],[1,"bg-secondary1","sticky","top-0","text-left","font-semibold","tracking-wide","text-primary2","z-10"],[1,"border-b"],["class","px-5 py-3 font-semibold tracking-wider",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mt-6","w-full","mb-6","sm:hidden"],["class","border-2 bg-white border-secondary1 max-h-[28rem] overflow-y-auto",4,"ngIf"],[1,"px-5","py-3","font-semibold","tracking-wider"],[3,"innerHTML"],["class","text-primary3 border-b-2 border-secondary1 bg-white",4,"ngFor","ngForOf"],[1,"text-primary3","border-b-2","border-secondary1","bg-white"],["class","px-5 py-5",4,"ngFor","ngForOf"],[1,"px-5","py-5"],["class","whitespace-no-wrap",4,"ngIf"],["class","whitespace-no-wrap flex inline-flex px-3 py-2 bg-primary1 text-white hover:bg-primary2 rounded-full shadow-md",3,"click",4,"ngIf"],["class","underline text-primary2 font-semibold cursor-pointer","pTooltip","clic para abrir","tooltipPosition","right",3,"click",4,"ngIf"],["class","w-full relative flex-col whitespace-no-wrap z-[1]",4,"ngIf"],[1,"whitespace-no-wrap"],[1,"whitespace-no-wrap","flex","inline-flex","px-3","py-2","bg-primary1","text-white","hover:bg-primary2","rounded-full","shadow-md",3,"click"],["pTooltip","clic para abrir","tooltipPosition","right",1,"underline","text-primary2","font-semibold","cursor-pointer",3,"click"],[1,"w-full","relative","flex-col","whitespace-no-wrap","z-[1]"],[1,"absolute","top-0","left-0","h-[3px]","bg-secondary2","w-full"],[1,"absolute","top-0","left-0","h-[3px]",3,"ngStyle"],[1,"absolute","top-[-5px]","h-[14px]","w-[14px]","rounded-full","flex","items-center","justify-center",3,"ngStyle"],[1,"h-[8px]","w-[8px]","rounded-full","bg-white"],[1,"text-center","py-5"],[1,"work-sans","text-lg","font-normal","text-primary2","italic"],[1,"border-2","bg-white","border-secondary1","max-h-[28rem]","overflow-y-auto"],["class","flex flex-col space-y-6",4,"ngFor","ngForOf"],[1,"flex","flex-col","space-y-6"],[1,"border-2","bg-white","border-secondary1","py-4","px-4"],[1,"flex","flex-col","space-y-4"],["class","flex justify-between",4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"w-1/2","font-semibold","text-primary2","p-2",3,"innerHTML"],[1,"w-1/2","p-2"],["class","whitespace-no-wrap flex inline-flex px-3 py-1 bg-primary1 text-white text-xs hover:bg-primary2 rounded-full shadow-md",3,"click",4,"ngIf"],["class","w-full relative flex flex-col justify-center mt-2 whitespace-no-wrap z-[1]",4,"ngIf"],[1,"whitespace-no-wrap","flex","inline-flex","px-3","py-1","bg-primary1","text-white","text-xs","hover:bg-primary2","rounded-full","shadow-md",3,"click"],[1,"w-full","relative","flex","flex-col","justify-center","mt-2","whitespace-no-wrap","z-[1]"],[1,"work-sans","text-lg","font-normal","text-primary2","italic","flex","justify-center"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"table",6)(7,"thead",7)(8,"tr",8),m(9,Ue,2,1,"th",9),s()(),m(10,Xe,2,1,"tbody",10)(11,Ye,5,1,"tbody",10),s()()()()()()(),o(12,"div",11),m(13,ct,2,1,"div",12)(14,lt,3,0,"div",12),s()),n&2&&(a(9),c("ngForOf",i.headers),a(),c("ngIf",i.data.length>0),a(),c("ngIf",i.data.length==0),a(2),c("ngIf",i.data.length>0),a(),c("ngIf",i.data.length==0))},dependencies:[y,k,D,j,le,ce],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#36c;border-radius:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#e6effd}"]})}return t})();var we=(()=>{class t{styleClass;style;shape="rectangle";animation="wave";borderRadius;size;width="100%";height="1rem";containerClass(){return{"p-skeleton p-component":!0,"p-skeleton-circle":this.shape==="circle","p-skeleton-none":this.animation==="none"}}get containerStyle(){return this.size?J($({},this.style),{width:this.size,height:this.size,borderRadius:this.borderRadius}):$({width:this.width,height:this.height,borderRadius:this.borderRadius},this.style)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["p-skeleton"]],hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",shape:"shape",animation:"animation",borderRadius:"borderRadius",size:"size",width:"width",height:"height"},decls:1,vars:7,consts:[[3,"ngClass","ngStyle"]],template:function(n,i){n&1&&f(0,"div",0),n&2&&(E(i.styleClass),c("ngClass",i.containerClass())("ngStyle",i.containerStyle),M("data-pc-name","skeleton")("aria-hidden",!0)("data-pc-section","root"))},dependencies:[H,j],styles:[`@layer primeng{.p-skeleton{position:relative;overflow:hidden}.p-skeleton:after{content:"";animation:p-skeleton-animation 1.2s infinite;height:100%;left:0;position:absolute;right:0;top:0;transform:translate(-100%);z-index:1}.p-skeleton.p-skeleton-circle{border-radius:50%}.p-skeleton-none:after{animation:none}}@keyframes p-skeleton-animation{0%{transform:translate(-100%)}to{transform:translate(100%)}}
`],encapsulation:2,changeDetection:0})}return t})(),Ie=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=w({type:t});static \u0275inj=O({imports:[y]})}return t})();var Ee=()=>[1,2,3];function pt(t,l){if(t&1&&(o(0,"option",22),p(1),s()),t&2){let e=l.$implicit;c("ngValue",e.descripcion),a(),Q(e.descripcion)}}function gt(t,l){if(t&1&&(o(0,"option",22),p(1),s()),t&2){let e=l.$implicit;c("ngValue",e.descripcion),a(),_("",e.descripcion," ")}}function mt(t,l){if(t&1&&(o(0,"th",28),f(1,"span",29),s()),t&2){let e=l.$implicit;a(),c("innerHTML",e.titulo,I)}}function ut(t,l){t&1&&(o(0,"td",31),f(1,"p-skeleton"),s())}function ft(t,l){if(t&1&&(o(0,"tr"),m(1,ut,2,0,"td",30),s()),t&2){let e=r(2);a(),c("ngForOf",e.headers)}}function ht(t,l){if(t&1&&(o(0,"div",23)(1,"table",24)(2,"thead")(3,"tr",25),m(4,mt,2,1,"th",26),s()(),o(5,"tbody"),m(6,ft,2,1,"tr",27),s()()()),t&2){let e=r();a(4),c("ngForOf",e.headers),a(2),c("ngForOf",G(2,Ee))}}function _t(t,l){t&1&&(o(0,"p",31),f(1,"p-skeleton"),s())}function vt(t,l){if(t&1&&(o(0,"div",39),f(1,"div",40),o(2,"div",41),m(3,_t,2,0,"p",30),s()()),t&2){let e=l.$implicit,n=r(3);a(),c("innerHTML",e.titulo,I),a(2),c("ngForOf",n.headers)}}function Ct(t,l){if(t&1&&(o(0,"div",35)(1,"div",36)(2,"div",37),m(3,vt,4,2,"div",38),s()()()),t&2){let e=r(2);a(3),c("ngForOf",e.headers)}}function bt(t,l){t&1&&(o(0,"div",32)(1,"div",33),m(2,Ct,4,1,"div",34),s()()),t&2&&(a(2),c("ngForOf",G(1,Ee)))}function yt(t,l){if(t&1){let e=S();o(0,"div",0)(1,"app-table",42),h("idClicked",function(i){v(e);let d=r();return C(d.onIdClicked(i))})("solicitudGuardada",function(i){v(e);let d=r();return C(d.solicitudGuardadaClick(i))}),s(),o(2,"app-paginador",43),h("pageChange",function(i){v(e);let d=r();return C(d.onPageChange(i))}),s()()}if(t&2){let e=r();a(),c("data",e.response)("headers",e.headers),a(),c("totalPages",e.totalPages)("initialPage",e.currentPage)}}var Mi=(()=>{class t{apiService;router;apiSFService;authService;appRef;cdRef;response;apiResponse;user;loading=!0;currentPage=1;pageSize=4;totalPages=1;categorias;estadosSolicitud;filterCategory="";filterStatus="";searchQuery="";fechaSolicitud="";headers=[{id:1,titulo:"ID"},{id:2,titulo:"Fecha solicitud <br> (dd/mm/aaaa)"},{id:3,titulo:"NIT empresa"},{id:4,titulo:"Nombre de la empresa <br> que realiza solicitud"},{id:5,titulo:"Territorial que <br> emiti\xF3 la solicitud"},{id:6,titulo:"Categor\xEDa de <br> solicitud"},{id:7,titulo:"Estado <br> solicitud"},{id:8,titulo:"concepto <br> solicitud"},{id:9,titulo:"Acciones"}];constructor(e,n,i,d,g,U){this.apiService=e,this.router=n,this.apiSFService=i,this.authService=d,this.appRef=g,this.cdRef=U,this.user=this.authService.currentUser}get hasSuperTransporteRole(){return this.user?.roles?.some(e=>e.roleName.includes("ROLE_SUPERTRANSPORTE"))??!1}ngOnInit(){this.appRef.isStable.pipe(Z(e=>e)).subscribe(()=>{localStorage.setItem("idSolicitud",""),this.loadInitialData()})}onPageChange(e){this.currentPage=e,this.getSolicitudes(this.categorias,this.filterStatus,this.filterCategory,this.searchQuery,this.fechaSolicitud,this.pageSize,this.currentPage)}loadInitialData(){this.apiService.getCategorias().subscribe(e=>{console.log(e),this.categorias=e.detalle,console.log(this.categorias)},e=>{console.error("Error fetching user data",e)}),this.apiService.getEstados().subscribe(e=>{console.log(e),this.estadosSolicitud=e.detalle,console.log(this.estadosSolicitud)},e=>{console.error("Error fetching user data",e)}),this.getSolicitudes(this.categorias,this.filterStatus,this.filterCategory,this.searchQuery,this.fechaSolicitud,this.pageSize,this.currentPage)}getSolicitudes(e,n,i,d,g,U,ke){this.loading=!0,console.log(e),this.apiSFService.getSolicitudes(n,i,d,g,U,ke).subscribe(T=>{this.user.roles.some(u=>u.roleName.includes("ROLE_SUPERTRANSPORTE"))?(this.headers=[{id:1,titulo:"ID"},{id:2,titulo:"Fecha solicitud <br> (dd/mm/aaaa)"},{id:3,titulo:"NIT empresa"},{id:4,titulo:"Nombre de la empresa <br> que realiza solicitud"},{id:5,titulo:"Territorial que <br> emiti\xF3 la solicitud"},{id:6,titulo:"Estado <br> solicitud"},{id:7,titulo:"Categor\xEDa de<br> solicitud"},{id:8,titulo:"Sem\xE1foro <br> alerta"},{id:9,titulo:"N\xFAmero<br> radicado"}],this.totalPages=T.totalPages,this.response=T.content.map(u=>{let De=new Date().valueOf(),Fe=new Date(u.fechaSolicitud).valueOf(),Re=De-Fe,Ae=Math.floor(Re/(1e3*60*60*24));return{id:u.id,fecha:u.fechaSolicitud,nit:u.nit,empresa:u.nombreEmpresa,territorial:u.territorial,estado:u.estadoSolicitudDescripcion,categoria:u.categoriaSolicitudDescripcion==="Fijaci\xF3n"?"Fijaci\xF3n de Capacidad Transportadora":u.categoriaSolicitudDescripcion==="Incremento"?"Incremento de Capacidad Transportadora":"Sin categor\xEDa",semaforo:Ae,radicado:u.numeroRadicado}}),console.log(this.response),this.loading=!1,this.cdRef.detectChanges()):(this.totalPages=T.totalPages,console.log(this.totalPages),console.log(T),this.response=T.content.map(u=>({id:u.id,fecha:u.fechaSolicitud,nit:u.nit,empresa:u.nombreEmpresa,territorial:u.territorial,categoria:u.categoriaSolicitudDescripcion==="Fijaci\xF3n"?"Fijaci\xF3n de Capacidad Transportadora":u.categoriaSolicitudDescripcion==="Incremento"?"Incremento de Capacidad Transportadora":"Sin categor\xEDa",estadoSolicitud:u.estadoSolicitudDescripcion,conceptoSolicitud:u.estadoSolicitudDescripcion,estadoSolicitudDescripcion:u.estadoSolicitudDescripcion})),this.loading=!1,this.cdRef.detectChanges(),console.log(this.loading))},T=>{this.loading=!1,this.cdRef.detectChanges(),console.error("Error fetching user data",T)})}applyFilters(){console.log("Aplicando filtros:",{category:this.filterCategory,status:this.filterStatus,searchQuery:this.searchQuery,fechaSolicitud:this.fechaSolicitud}),this.currentPage=1,this.categorias&&this.getSolicitudes(this.categorias,this.filterStatus,this.filterCategory,this.searchQuery,this.fechaSolicitud,this.pageSize,this.currentPage)}clearFilters(){this.filterCategory="",this.filterStatus="",this.searchQuery="",this.fechaSolicitud="",this.currentPage=1,console.log("Filtros limpiados"),this.categorias&&this.getSolicitudes(this.categorias,this.filterStatus,this.filterCategory,this.searchQuery,this.fechaSolicitud,this.pageSize,this.currentPage)}onIdClicked(e){console.log(e),this.router.navigate(["/solicitudAprobacion"],{state:{id:e}})}solicitudGuardadaClick(e){console.log(e.id);let n=e.categoria=="Incremento"?"/incrementocapacidadtransportadora":"fijacioncapacidadtransportadora";this.router.navigate([n],{state:{idSolicitud:e.id}})}static \u0275fac=function(n){return new(n||t)(x(Ce),x(ne),x(be),x(V),x(te),x(K))};static \u0275cmp=b({type:t,selectors:[["app-dashboard"]],standalone:!0,features:[P],decls:37,vars:9,consts:[[1,"w-full"],[1,"w-full","px-6","sm:px-24","md:px-36","mt-12"],[1,"text-primary1","!font-bold"],[1,"card","mt-2"],[1,"md:flex","justify-center","gap-4","px-4"],[1,"w-full","md:max-w-80"],["for","filter1",1,"text-primary3","font-medium","h-full","text-xs"],["id","filter1",1,"mt-1","shadow-sm","w-full","p-2","bg-transparent","border-2","border-secondary1","focus:outline-none","focus:border-primary1","flex","justify-between","items-center",3,"ngModelChange","ngModel"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],["for","search",1,"text-primary3","font-medium","h-full","text-xs"],["type","text","placeholder","Buscar por ID, NIT o empresa solicitante",1,"mt-1","shadow-sm","rounded-md","w-full","p-2","border-2","border-secondary1","focus:outline-none","focus:border-primary1","bg-transparent",3,"ngModelChange","keydown","ngModel"],["for","filter2",1,"text-primary3","font-medium","h-full","text-xs"],["id","filter2",1,"mt-1","shadow-sm","w-full","p-2","bg-transparent","border-2","border-secondary1","focus:outline-none","focus:border-primary1","flex","justify-between","items-center",3,"ngModelChange","ngModel"],["type","date","required","","placeholder","dd/mm/aaaa",1,"mt-1","shadow-sm","rounded-md","w-full","p-2","border-2","border-secondary1","focus:outline-none","focus:border-primary1","bg-transparent",3,"ngModelChange","ngModel"],[1,"flex","justify-end","p-4","space-x-4"],[1,"bg-secondary1","text-primary2","inline-flex","items-center","justify-center","px-8","py-1","hover:bg-primary2","hover:text-white","font-medium","rounded-full","text-[16px]","work-sans","text-center",3,"click"],["type","button",1,"",3,"click","keydown"],[1,"mb-4","w-full","px-6","sm:px-6","md:px-12"],["class","card mt-6 pb-4 mb-4 hidden sm:block",4,"ngIf"],["class","card mt-6 w-full mb-4 sm:hidden",4,"ngIf"],["class","w-full",4,"ngIf"],[3,"ngValue"],[1,"card","mt-6","pb-4","mb-4","hidden","sm:block"],[1,"w-full","whitespace-no-wrap","border-2","border-secondary1"],[1,"border-b","bg-secondary1","text-left","font-semibold","tracking-wide","text-primary2"],["class","px-5 py-3 font-semibold tracking-wider",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"px-5","py-3","font-semibold","tracking-wider"],[3,"innerHTML"],["class","p-2",4,"ngFor","ngForOf"],[1,"p-2"],[1,"card","mt-6","w-full","mb-4","sm:hidden"],[1,"border-2","bg-white","border-secondary1","max-h-96","overflow-y-auto"],["class","flex flex-col space-y-6",4,"ngFor","ngForOf"],[1,"flex","flex-col","space-y-6"],[1,"border-2","bg-white","border-secondary1","py-4","px-4"],[1,"flex","flex-col","space-y-4"],["class","flex justify-between",4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"w-1/2","font-semibold","text-primary2","p-2",3,"innerHTML"],[1,"w-1/2","p-2"],[3,"idClicked","solicitudGuardada","data","headers"],[3,"pageChange","totalPages","initialPage"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"div",1)(2,"h3",2),p(3," Solicitudes "),s(),o(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),p(8,"Filtrar por categor\xEDa"),s(),o(9,"select",7),z("ngModelChange",function(g){return N(i.filterCategory,g)||(i.filterCategory=g),g}),o(10,"option",8),p(11,"todas"),s(),m(12,pt,2,2,"option",9),s()(),o(13,"div",0)(14,"label",10),p(15,"Buscar"),s(),o(16,"input",11),z("ngModelChange",function(g){return N(i.searchQuery,g)||(i.searchQuery=g),g}),h("keydown",function(){return i.applyFilters()}),s()(),o(17,"div",0)(18,"label",12),p(19,"Filtrar por estado"),s(),o(20,"select",13),z("ngModelChange",function(g){return N(i.filterStatus,g)||(i.filterStatus=g),g}),o(21,"option",8),p(22,"todos"),s(),m(23,gt,2,2,"option",9),s()(),o(24,"div",0)(25,"label",10),p(26,"Fecha solicitud"),s(),o(27,"input",14),z("ngModelChange",function(g){return N(i.fechaSolicitud,g)||(i.fechaSolicitud=g),g}),s()()(),o(28,"div",15)(29,"button",16),h("click",function(){return i.clearFilters()}),p(30," Limpiar Filtros "),s(),o(31,"app-primary-button",17),h("click",function(){return i.applyFilters()})("keydown",function(){return i.applyFilters()}),p(32,"Aplicar Filtros"),s()()()(),o(33,"div",18),m(34,ht,7,3,"div",19)(35,bt,3,2,"div",20)(36,yt,3,4,"div",21),s()()),n&2&&(a(9),A("ngModel",i.filterCategory),a(3),c("ngForOf",i.categorias),a(4),A("ngModel",i.searchQuery),a(4),A("ngModel",i.filterStatus),a(3),c("ngForOf",i.estadosSolicitud),a(4),A("ngModel",i.fechaSolicitud),a(7),c("ngIf",i.loading),a(),c("ngIf",i.loading),a(),c("ngIf",i.loading==!1))},dependencies:[y,k,D,ve,fe,he,pe,ue,ge,_e,me,re,ae,xe,Se,Pe,Oe,Ie,we,de],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:3px;height:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#36c;border-radius:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#e6effd}"]})}return t})();export{Mi as default};
